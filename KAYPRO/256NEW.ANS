        KAYPRO II/IV 256K RAM UPGRADE - THE ANSWER TO THE PROBLEM
        =========================================================

Ron Rock had problems with my 83 Kaypro II/IV 256K upgrade.  I hope
the following will help him and others.  I also hope that those of
you who didn't spot my two typing mistakes will be generous and
forgive me.

Ron found that after installing the mod while still using 64K chips
that small programs worked but large ones didn't.  This suggested to
me that different parts of RAM were being addressed simultaneously.
I had this at one stage whilst debugging my prototype although from
a different cause.

NOW FOR THE CAUSE AND CURE :- My circuit as published has PIO 1 and
A14b coming from U3 labelled the wrong way around.  I accept full
responsibility for this mistake it slipped past all my checks.  Pins
10 and 11 of U3 (the 74LS153) should connect to A14B (Kaypro U33 pin
11) and Pin 12 of U3 goes to the PIO as PIO 1 (PAD E29).

My error results in A14 not reaching the memory and thus the first
16K overlaps the second 16K whilst the third 16K overlaps the fourth
16K.  Thus any program bigger than 16K overwrites itself and dies.
This would explain Ron Rocks problem.

If you get this far you will find another problem.  The REFRESH for
RA8 won't work until you earth PIN 2 of the 74LS393 (U1).

Anybody adding 256K to their machine please let me know how you get
on with it (especially Mr Rock and his son to who I owe special
thanks for bringing this problem to my attention).  Do tell me of
any other problems and any solutions you find to them.

Dr Michael W D Liddle,
21 The Frostings,
Grenoside
Sheffield,
S30  3NZ.
Tel. Sheffield (0742) 460431

P.S.   The transposition of A14 and A15 (U33 pins 10 and 11) was
something else I hadn't noticed.  I took the lid of my machine and
find that Micro-C have it right.  I apologise to anyone who had
problems using the circuit in the file that appeared on various BB's
shortly before Micro-C published the official version.  This
particular bug would only show up once you had 256K up and running.

P.P.S.  The Micro-C version is correct in earthing pin 2 of the
74LS158 although my system does work fine without this it may make a
difference to others.

P.P.P.S.  Since submitting the design to Micro-C I have altered the
PIO connections.  Both work with the 63K CBIOS I recently made
available however the ZCPR3 BIOS needs the newer PIO arrangement.
For those who want an exact duplicate of my system the following is
straight from my (working) motherboard to you: PIO 1 = PAD 29.  PIO
2 =  PAD 31.  PIO 3 =  PAD 28.
  

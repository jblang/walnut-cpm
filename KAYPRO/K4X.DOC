K4X ROM upgrade for '84 Kaypros  by Barry A. Cole 13MAR88
-------------------------------------------------
INTRODUCTION:
This is a public announcement of a major set of enhancements for Kaypro
'84 model CP/M computers.  An upgrade to the EPROM with disk and
instructions sells for $50 +6.5% CA tax.  A full 10MB internal
subsystem sells for $275 + tax.  I believe this is easily the fastest
and lowest cost enhancements you can buy if you own any of this series
of machines.  I am active on this RCPM and also on betaline(213-313-2549),
if you would like further information.

COMPATIBILITY:
The K4X EPROM is a direct replacement for the program EPROM in all '84
model CP/M Kaypro computers.  These are easily identified by the presence
of 2 serial ports on the back panel.  This will replace the program EPROM,
and is therefore mutually exclusive of other upgrades such as the Advent
turborom.

INSTALLATION:
1.  Unplug your machine!
2.  Remove 10 phillips head screws from top and sides of your Kaypro.
3.  Remove cover.
4.  Locate socket in center of board(usually U34), that contains your present
    EPROM.  Pry out of socket and place in supplied conductive foam.
5.  Insert supplied EPROM/socket combination.  Notch faces the left side of
    the board as you face the front of the computer.
6.  Attach the connected clip to the Z80 chip pin 3(U43).  This chip is
    just in front of the EPROM socket.
7.  Power up the computer and look for the boot message on the screen.
8.  If that works, replace the lid, otherwise power down and recheck 
    your installation.

GENERAL SALES PITCH:
I developed this product to allow easy interchange of diskettes between
my '83 and '84 Kaypros.  I added disk diagnostics, faster screen access,
drivers for 2 10Mb or one 20Mb winchester, and Advent RAM disk, and lots of
other convenience and performance features.  I've built a non-proprietary
superset of the CP/M operating system and put the whole system into 
the ROM.  This allows a very fast reboot and eliminates the requirement
of having a system image on the disk.

FEATURES:
1.  Original 6 built in commands(DIR,ERA,REN,TYPE,SAVE,USER) supported.
2.  Additional commands are supported:
    LIST file.typ  sends a file to the printer
    GO             re-executes previously loaded .COM file
    GET adr file.typ  loads program into memory
    JUMP adr          executes program at specified address
    SAFE              sets hard disk to safety area(harmless on floppy system)
    DISK              a built in copy, era, etc utility
    D                 alphabetized directory including file sizes
    D $  or D *.typ $ same as above but ALL user areas
    BOOT              boots from your floppy in drive A:
    NORM              sets into protected mode, most commands are disabled.
                      This is used to run a BBS or similar.
    PASS passwd       undoes effect of NORM-this is default mode
3.  Full drive user format of commands is allowed.  Semicolon may be
    substituted for colon.  The following are valid commands:
      a: A: B9; 7; USER 7
    A>9:COMNAME B2:PARMFILE
4.  All numeric parameters may be followed by an H to express in hexadecimal
	e.g. SAVE 3BH FILE.TYP
5.  SAVE and REN commands will request confirmation if the file exists.
6.  The current user number is reported.  e.g. A5>
7.  ERAsed files are displayed.
8.  TYPE command pauses for a key press each screen full.  A control C
    terminates the TYPE prematurely.
9.  If a .COM file is not found, drive A: is searched.  User 0 is searched 
    after current user area.  Drive C: will be used instead of A: if a
	hard disk is present.
10. Disk drives are not logged in until accessed.  You can boot with NO
    disk in any drive!
11. Automatic disk logging occurs on bad writes.  No ^C is needed!
12. A diagnostic message is presented for selects of a non-existent
    disk drive.  Aborting does not require a reset!
13. The system boots any disk-even cardboard.
14. Screen dump to a parallel printer is supported at all times by ^_p
15. Screen clear including the cursor is supported at att times by ^_c
16. Logging in a disk drive such as in NEWSWEEP automatically selects
    between single and double sided drive!
17. Disk access and error recovery is much faster.
18. Disk errors are reported on the screen:
    DISKERR RB T=01 S=04 /SEC NOT FOUND/DRQ/
    reports an error reading from drive B, track 1, sector 4
19. Both 83 and 84 Kaypro screen codes are supported.  Programs like
    Perfect Filer will now run on this machine without change!
20. Two 10MB drives are supported in addition to 2 floppies with the proper
    host adapter , controller, and drive.  A complete 10MB upgrade is 
    available from Barry for $275.
21. Fatal bugs in the U rom are corrected.
22. Drive order may be remapped by setting a table at location bios+80H
23. The cursor and numeric keypad keys can each generate 1 or two 
    keystrokes.  The supplied program KEYS.ASM and KEYS.COM will allow
    the user up to four sets of choices.
24. A full system runs in a 63K system.  A 2 floppy plus RAMDISK
    runs in a 64K system.  This allows more space for your programs.


Disk error reporting:
     Disk errors are reported as follows:
            DISKERR: RB T=03 S=40 /SEC NOT FOUND/DRQ/
     Following the colon is a R for reading or W for writing
     Then the track and sector number are reported.
     Error types are separated by slashes.
       WRT PROT      - disk is write protected(need to remove tab)
       CRC           - data is improperly written.  This may be a
                       bad diskette, drive going out of allignment,
                       or mishandling of the diskette.  If this
                       message recurs, try another brand of diskette!
       SEC NOT FOUND - System is trying to access a sector past the
                       bounds of the disk or diskette is not formatted
                       properly.  This may also occur if you switched
                       between a Kaypro 2 and Kaypro 4 disk without ^C.
       DRQ           - Data request indicates that the sector size was
                       not the expected length.  This is generally
                       bad formatting.
       LOST DATA     - This is RARE.  It denotes a major failure in
                       the computer's disk controller or in the drive.

     Errors on reading or writing are retried 8 times.  The system has
recovered if no BDOS error is reported.

e drive.

     Errors on reading or writing 
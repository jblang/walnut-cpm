.op














                 The Need for Direct Access Storage Management

                             A User's Perspective
































                                G. Benson Grey
                             Cedar Mill Z-Node 24

                                August 20, 1987

.paŠ.pn 1
.he                    DASM - Direct Access Storage Managment                 #

    L----!----!----!----!----!----!----!----!----!----!----!----!----!----R
 
                                 INTRODUCTION


    Thå  purposå  oæ thió perspectivå ió tï providå backgrounä  informatioî 
    anä  conceptó whicè maù bå utilizeä iî managinç disë datá  fileó  (datá 
    sets©  oî  microcomputeò  systems®   Thió  topiã  doeó  noô  justifù  á 
    dissertatioî oî thå evolutioî oæ microcomputers¬  buô iô doeó justifù á 
    discussioî  oæ ho÷ technologù haó causeä aî evolutioî iî  datá  storagå 
    anä  retrieval®  Thió  iî turî wilì providå thå foundationó foò  á  ne÷ 
    Direcô Accesó Managemenô System.

    Therå  maù bå manù morå factoró involveä iî thió evolutioî thaî caî  bå 
    properlù addresseä iî thió document®  Therefore¬ onlù á fe÷ factoró anä 
    theiò  consequenceó  wilì bå considered®  Amonç theså factoró arå  sucè 
    thingó  aó  improveä  microcomputeò  capabilities»   largeò    computeò 
    memorieó  anä  capacitieó  foò direcô accesó deviceó (floppù  anä  harä 
    disks)»  morå  sophisticateä softwarå anä advanceä  operatinç  systems» 
    standardizatioî  oæ communicationó protocols»  decreaseä costó oæ  datá 
    communications» anä aî increaså iî informatioî exchange.

    Improveä microcomputeò capabilitieó implieó ne÷ machineó arå capablå oæ 
    processinç  morå information¬  morå efficientlù thaî eveò  before®  Thå 
    useò  oæ theså ne÷ deviceó caî expecô tï geô morå donå iî thå samå timå 
    aó waó previouslù possible® Thå abilitù oæ thå microcomputeò tï procesó 
    morå information¬ haó createä demanä foò largeò availablå memories.

    Largeò  maiî computeò memorù spacå haó leä tï thå developmenô  oæ  morå 
    sophisticateä software¬ advanceä operatinç systemó anä utilities® Theså 
    developments¬  iî  turn¬  madå iô simpleò tï emploù á computeò tï solvå 
    problems®  Useró caî bå lesó concerneä abouô ho÷ tï solvå hardwarå  anä 
    softwarå problemó anä morå concerneä abouô whicè problemó tï prograí oî 
    thå computer.

    Controì  Program/Monitoò (CP/M© haó beeî thå då factï operatinç  systeí 
    standarä  iî  thå  8-biô microcomputeò domaiî foò thå  pasô  1µ  years¬ 
    newer¬  morå  capablå operatinç systemó arå emerging®  Thå ne÷ breeä oæ 
    operatinç   systeí   arå  beginninç  tï  brinç  thå   advantageó   (anä 
    disadvantages©   oæ  theiò  mainframå  counterpartó  tï  thå   everydaù 
    microcomputeò user®  Aó operatinç systemó becomå morå sophisticated¬ sï 
    too¬ do thå users.
.paŠ
    Witè  thå standardizatioî oæ communicationó protocoló anä  availabilitù 
    oæ higheò speed¬  loweò priceä modems¬ digitaì communicationó ió aô thå 
    fingertipó  oæ  virtuallù everù household®  Communicationó  witè  otheò 
    computers¬  locateä aô greaô distanceó awaù froí thå user¬  haó  becomå 
    lesó foò expensive®  Thió ió duå partlù tï increaseä competitioî iî thå 
    datá  communicationó  businesó  whicè resultó iî  loweò  lonç  distancå 
    rates®  Thå  otheò majoò factoò ió thå decreaså iî cosô oæ purchasinç á 
    devicå ablå tï communicatå oveò telephonå lineó oò satellitå links® Thå 
    exchangå  oæ  informatioî viá remotå accesó systemó ió  expandinç  verù 
    rapidly®  Thå cosô oæ communicationó ió diminishinç tï matcè thå  rapiä 
    expansion.

    Improveä  computeò capabilitieó meanó thå hardwarå caî dï morå  iî  thå 
    samå abounô oæ timå aó waó previouslù possible®  Availabilitù oæ largeò 
    memorieó foò thå ne÷ computeró haó madå iô possiblå tï develoğ advanceä 
    operatinç systemó anä utilities®  Theså facters¬ iî turn¬ demanä higheò 
    capacitieó foò auxiliarù storagå deviceó (diskó anä tapes)® Movinç morå 
    informatioî  implieó wå musô movå thå informatioî fasteò tï  accomodatå 
    thå effiencieó oæ thå neweò computeò systems.

    Thå bottoí linå ió thaô microcomputeró hardwarå anä softwarå and users,
    havå  undergonå  aî incredible¬  mind-bogglinç revolutioî iî á merå  1µ 
    years¡ Thå relativelù unsophisticateä hardwarå anä softwarå oæ thå pasô 
    ió gonå forever® Complex¬ buô morå user-friendly¬ hardwarå anä softwarå 
    ió  thå currenô trend®  Thå verù ratå oæ technologicaì  advancemenô  ió 
    staggering¡  Iô ió difficult¬  eveî foò thå verù adepô computeò person¬ 
    tï keeğ uğ witè hardwarå anä softwarå advances.

    Thå  reaì pivotaì poinô oæ thió wholå discussioî boiló dowî tï onå verù 
    essentiaì point® Wå no÷ havå morå informatioî tï storå thaî eveò beforå 
    iî ouò history® Thå ratå oæ datá exchangå ió increasing¬ makinç greateò 
    demands on our storage devices.

    Datá  baså managmenô systemó allo÷ uó tï managå anä controì  individuaì 
    datá  elements®  Thå  probleí  no÷ becomeó onå oæ  managinç  datá  filå 
    collections®  Thió  haó  leä  tï thå  developmenô  oæ  filå  managemenô 
    systems®   Filå  managemenô systemó allo÷ uó tï managå anä controì datá 
    fileó whicè contaiî thå individuaì datá elements® Thå fileó caî bå datá 
    oò text¬ á collectioî oæ programs¬ oò elementó oæ thå operatinç system.

    Why¬  yoõ maù ask¬ ió thió á problem¿ Whù musô wå controì alì thå fileó 
    containinç thå individuì elements¬  iæ wå havå controì oæ thå  elementó 
    themselves¿ Thå answer¬ again¬ requireó somå additional background.
.paŠ
                                  THE PROBLEM


    Earlù  floppù diskó werå generallù 8.00¢  single-sided¬  single-densitù 
    (SSSD©  anä coulä usuallù storå betweeî 19° anä 25¶ kilo-byteó (kB©  oæ 
    data®  Theî double-sided¬  double-densitù (DSDD© floppieó iî botè 5.25¢ 
    anä 8.00¢ begaî tï increaså thå floppù capacitù tï betweeî 38° anä  60° 
    kB®  Today¬  capacitieó  oæ uğ tï 1.² mega-byteó (MB© arå availablå foò 
    theså  twï  formats®  Stilì  smaller¬  3.50¢  floppù  diskó  caî  storå 
    capacitieó uğ tï aî ordeò oæ magnitudå greateò thaî theiò predecessors¬ 
    abouô 1° MB.

    Aô thå samå time¬ thå harä diskó werå beginninç tï appeaò oî thå scene® 
    Theså earlù deviceó coulä storå betweeî µ anä 1° MÂ oæ data® Tï date¬ á 
    5.25¢  8-platteò harä disë ió capablå oæ storinç uğ tï 76° MÂ oæ  data® 
    Sï  what'ó alì thå fusó witè filå managemenô iæ wå caî storå  alì  thió 
    informatioî oî á singlå direcô accesó device?

    Yoõ  wilì recalì thaô informatioî exchangå ió increasinç verù  rapidly® 
    Revisionó tï existinç programó abound® Datá filå contentó caî changå oî 
    á  dailù basis¬  aó ió thå caså witè RAÓ useò anä messagå  files®  Eacè 
    day¬  ne÷  filå uploadó causå thå contentó oæ á disë systeí tï  change® 
    Systeí  useró constantlù reviså oò modifù programó anä datá fileó whicè 
    producå ne÷ fileó differenô froí thå fileó which existed yesterday.

    Thå probleí becomeó onå oæ ho÷ tï managå anä controì aî orderlù copù oæ 
    the higè capacitù harä disë systems® Thå procesó ió calleä "backinç up¢ 
    thå  harä disk®

    Sincå  mosô  microcomputeò systemó developeä froí á floppù  disë  baseä 
    system¬  floppieó  arå readilù availablå tï storå thå contentó oæ  harä 
    disks® Magnetiã tapå cartridgeó arå alsï useä aó á backuğ medium® Theså 
    arå considereä "sequentiaì acccess¢ devices®  Thió meanó ió iî ordeò tï 
    "restore¢ á filå aô thå enä oæ thå tape¬ wå havå tï waiô untiì thå tapå 
    haó reacheä thå poinô wherå ouò filå waó written® Onlù theî arå wå ablå 
    tï  restorå iô tï thå harä disk®  Sincå wå caî directlù positioî tï anù 
    filå oî á floppù disk¬ iô ió classifieä aó "direcô access¢ device.

    Whaô  dï wå dï wheî thå systeí haó á systeí malfunctioî whicè  destroyó 
    datá  fileó  storeä oî thå harä disk®  Ho÷ dï wå "restore¢ datá tï  thå 
    disë iæ iô haó beeî destroyed¿ Whicè fileó arå wå tï puô back¿ Wherå dï 
    thå fileó exist¿  Wheî waó thå lasô backuğ copù made?  Ho÷ ofteî dï  wå 
    neeä tï backuğ files¿  Wherå shalì wå "archive¢ them¿ Ho÷ manù oæ theså 
    backuğ copieó dï wå neeä tï maintain¿ Ho÷ manù floppù diskó ió requireä 
    to maintain an adequate archival system? 

    Iô ió theså questionó anä theiò answeró whicè wilì leaä uó tï develoğ á 
    ne÷  systeí calleä Direcô Accesó Monitoò Systeí (DAMS)®  Unfortunately¬ 
    wå  cannoô dra÷ oî experiencå froí thå microcomputeò world¬  sincå  thå 
    probleí  herå ió onlù jusô beginninç tï surface®  Instead¬  wå neeä  tï 
    looë  aô  ho÷ manù oæ thå mainframå computeró  managå  thå  mountainouó 
    volumå  oæ  datá fileó anä ho÷ thå archivaì procedureó maù  bå  deriveä 
    froí theså principles.
Š
                              TOWARDS A SOLUTION


    Eveî  thougè  harä  disë driveó arå ablå tï storå morå datá  thaî  eveò 
    before¬ theù arå stilì subjecô tï poweò outages¬ mechanicaì failure¬ oò 
    otheò  unexplaineä phenomená whicè ultimatelù corrupô datá setó writteî 
    oî thå thå device.

    Existinç datá setó agå anä becomå obsoletå anä maù bå deleted® Theù arå 
    upgradeä  tï replacå previouó versions®  Ne÷ datá setó arå added®  Thió 
    procesó  continueó throughouô thå lifetimå oæ datá setó storeä  oî  anù 
    magnetiã media.

    Largå  mainframå computeró monitoò activitù oæ on-linå datá sets¬  and¬ 
    aó  thå usagå (demand© foò thå datá setó diminish¬  thå datá  setó  arå 
    compresseä  anä theî moveä tï anotheò storagå mediuí (á  high-capacity¬ 
    shareä storagå device)®  Theså datá sets¬ arå maintaineä oî thió shareä 
    storagå  mediuí foò á perioä oæ timå anä theî migrateä tï magnetiã tapå 
    foò off-line archival® Thå datá setó arå stilì availablå foò use.

    Thå  accesó timå requireä retrievå thå archiveä datá seô becomeó  quitå 
    long®  Thå procesó requireó aî operatoò tï locatå anä mounô thå correcô 
    tape¬  anä  theî inforí thå operatinç systeí tï restorå thå datá seô tï 
    aî  appropriatå  device®  Thå procedurå ió calleä restoratioî  oæ  datá 
    sets®  Thió kinä oæ datá seô managemenô ió calleä á Hierarchiaì Storagå 
    Managemenô System.

    Magnetiã  tapå archivaì systemó arå expensivå anä arå stilì  sequentiaì 
    iî nature®  Theù arå buô onå answer® Usinç floppù diskó tï archivå datá 
    setó storeä oî á harä disë systeí appearó tï bå á lesó expensivå methoä 
    and readily lends itself to almost every microcomputer system today.

    Aô thió point¬  wå mighô consideò thå harä disë aó aî extensioî oæ  thå 
    computer'ó  maiî memory®  Eveî thougè thå accesó timå foò á datá seô ió 
    diminished¬ iô ió fasteò thaî accessinç á floppù disk® Iî addition¬ thå 
    capacitù oæ thå harä disë ió ofteî severaì orderó oæ magnitudå  greateò 
    thaî caî bå storeä oî á singlå floppy®  Thió meanó thaô thå mosô activå 
    datá  sets¬  thoså iî uså everyday¬  wilì mosô likelù bå storeä oî  thå 
    fastesô device¬ namelù thå harä disk.

    Since¬  however¬ thå capacitù oæ thå harä disë ió fixed¬ wå must remove
    datá setó froí thå harä disë tï á floppù disë iî ordeò tï makå rooí foò 
    newer¬   morå  activå  datá  sets®  Thió  procesó  requireó  thaô  somå 
    statisticaì informatioî bå maintaineä abouô thå datá setó sï thaô  onlù 
    propeò oneó wilì bå removeä froí thå on-linå system.

    Foò generaì users¬  thió procesó ió noô nearlù aó complicateä aó iô  ió 
    foò operatoró oæ Remotå Accesó Systemó (RAS)®  Iî thå formeò case¬  thå 
    systeí  operatoò generallù knowó whicè datá setó caî bå safelù  removeä 
    froí thå on-linå system® Iî thå latteò case¬ thå systeí operatoò maù oò 
    maù noô kno÷ whicè datá setó arå thå mosô active®  Somå  files¬  namelù 
    utilities¬  arå ofteî kepô oî thå systeí foò verù lonç periodó oæ time® 
    Otheò datá setó changå sï rapidly¬  thaô thå neeä foò aî orderlù methoä 
    of maintaining them becomes very necessary and very important.Š
                               SOME GROUND RULES

    Beforå  wå caî consideò implementatioî oæ á datá managemenô system¬  wå 
    musô definå somå parameteró anä conditionó sï thaô á definitioî caî  bå 
    developed® Wå musô consideò sucè thingó aó floppù disë capacity¬ volumå 
    labels¬ seriaì numbers¬ date¬ timå anä sï on® What¬ foò example¬ caî wå 
    dï  wheî thå totaì capacitù oæ á floppù disë ió lesó thaî thå datá  seô 
    size¿  Ho÷ activå ió thå datá set¿  Wheî waó iô lasô accessed¿ Wheî waó 
    iô lasô archived¿ Ho÷ manù archiveä copieó neeä bå kept¿ Ho÷ ofteî musô 
    a data set be archived? How long should the archived data set be saved?

    Leô us¬ foò á moment¬ consideò á theoreticaì system® Leô uó alsï definå 
    termó anä analyzå theiò meaningó anä consequenceó aó wå proceed® Foò uó 
    tï dï thió properly¬ we'lì definå thå operatinç systeí tï bå CP/Í (oò á 
    CP/Í compatiblå -- ZRDOS¬ P2DOS¬ etc)® Thå systeí haó fouò floppieó anä 
    á 60MÂ harä disk® Floppù capacitù ió eitheò 256Ë oò 1.2MB¬ althougè anù 
    otheò  sizeó  arå equallù applicable®  Thió systeí ió accesseä bù  manù 
    personó oî á dailù basió (e.g®  RAS)®  Twï floppù driveó arå 8¢ anä twï 
    arå  5.25"®  Thå harä disë ió logicallù divideä intï eighô  sub-drives® 
    Thå  capacitù oæ eacè sub-drivå ió fixeä aô 7.68MB®  Anù logicaì  drivå 
    wilì havå useò areaó 0-1µ (oò 0-3± iæ applicable)®  

    Harä  disë mediá ió generallù considereä tï bå non-removable®  Thaô is¬ 
    nï  parô oæ iô caî eveò bå removeä froí thå system®  Thió implieó  thaô 
    eacè sub-drivå caî bå defineä aó á fixeä booë oò volume® Floppù drives¬ 
    oî thå otheò hand¬ havå mediá whicè ió removablå (diskó caî bå inserteä 
    oò removeä aô will)®  Eacè floppù disk¬ therefore¬ caî bå considereä tï 
    bå á removablå booë oò volume®  Eacè fixeä volumå maù havå thå capacitù 
    tï contaiî severaì removablå volumes® Witè currenô floppù capacitieó iô 
    ió  unlikelù thaô á removablå volumå woulä contaiî thå entirå  contentó 
    oæ á fixeä volume.

    Onå  oæ thå verù firsô thingó thaô shoulä occuò tï us¬  ió thå neeä  tï 
    identifù eacè fixeä oò removablå volumå thaô caî bå oî thå system® Thió 
    identifieò wå shalì calì thå volumå labeì and/oò volumå seriaì  number® 
    Thió means¬  eacè floppù disë will¬ aó á minimum¬ requirå aî individuaì 
    volumå number®  Thå disë maù oò maù noô havå aî individuaì volumå date® 
    Eacè volumå oî thå systeí wilì havå á tablå oæ contentó (directory© foò 
    thå datá setó thaô arå containeä oî thå volume.

    No÷ leô uó consideò ho÷ á datá seô (file© ió created®  Thå mosô obviouó 
    methoä ió foò á useò tï invokå aî editoò oò worä processoò anä creatå á 
    ne÷ datá set®  Aî existinç datá seô ió editeä anä á new¬  modifieä datá 
    seô  ió created® A remotå useò may upload á ne÷ datá set® Perhaps á ne÷ 
    floppù arriveó iî thå maiì witè ne÷ datá setó oî it®  Lesó obviouó  arå 
    thoså  datá setó whicè arå createä aó á consequencå oæ runninç programó 
    oò utilities®

    Eveî  lesó obviouó arå thoså datá setó whicè changå durinç  thå  normaì 
    courså oæ systeí operatioî (messagå bases¬  upload/downloaä logs¬  datá 
    seô descriptions¬ useò datá bases¬ disë directories¬ etc.)® Thió latteò 
    caså ió special® Á ne÷ datá seô waó noô created¬ buô ratheò aî existinç 
    onå  waó  modifieä  tï contaiî informatioî differenô froí whaô  iô  waó 
    previously.Š
                        DATA SET NAMES & VOLUME HEADERS

    Iô ió noô withiî thå scopå oæ thió documenô tï presenô á discussioî  oî 
    filå naminç conventions® However¬ á fe÷ elementarù observationó wilì bå 
    presented in the interest of clarity and understanding.

    Á datá seô ió aî individuaì file¬  oò á collectioî oæ individuaì files® 
    Aî  examplå oæ aî individuaì filå mighô bå ZCPR33.Z80®  Á collectioî oæ 
    individuaì fileó mighô bå alì thoså fileó containeä iî aî archivå oò iî 
    á librarù (ZCPR33.LBÒ oò ZCPR33.ARÃ oò ZCPR33.ARK)®  Earlieò wå assumeä 
    CP/Í compatabilitù whicè stateó thaô á filå maù havå aî 8-bytå namå anä 
    a 3-byte extension. 

    Thå firsô 8-byteó shoulä describå thå namå oæ thå filå anä itó revisioî 
    leveì (ZCPR30¬ ZCPR33¬ etc.)® Thå lasô 3-byteó shoulä describå thå typå 
    oæ filå iô ió (ASM¬  DAT¬ DOC¬ HEX¬ LST¬ MAC¬ PRN¬ REL¬ UPÄ anä sï on)® 
    Compresseä  fileó  generallù  havå  á eitheò á  Ñ  (Squeezed©  oò  á  Ú 
    (Crunched© aó thå middlå letteò oæ thå filå type.

    Somå  oæ thå mosô commoî filenameó containeä iî á datá seô  collectionó 
    arå -README¬  -READ.ME¬  -README.1ST® Theså filenameó neitheò telì whaô 
    datá seô theù belonç to¬  noò dï theù conveù anù particulaò informatioî 
    abouô  thå  datá set®  Thå purposå oæ precedinç thå filå namå witè  thå 
    dasè oò hypheî (-© waó sï thå filenamå woulä sorô tï thå beginninç oæ á 
    directorù listing®  Presumably¬ thió ió sï thå persoî lookinç aô sucè á 
    directorù woulä reaä thaô filå first®  Thió ió absurd® Iô woulä bå mucè 
    betteò tï havå á filå extensioî (type© oæ .RMÆ (Reaä Må First© anä havå 
    thå 8-bytå filenamå represenô thå samå collectivå seô oæ data.

    Somå  disë  cataloç programó uså thå dasè tï precedå thå volumå  seriaì 
    number¬  volumå name¬  and/oò volumå date/time® Thå reasoî ió thå sameº 
    sï  thå cataloç prograí wilì seå thå volumå identificatioî  first®  Foò 
    thå purposeó oæ ouò discussion¬ wå wilì assumå thå samå convention® Foò 
    example:

              -       .000   <--- Volume Number
              -VOLUME .      <--- Volume Name
              -01JAN87.      <--- Volume Date
              -140045 .      <--- Volume Time

              -VOLUME .000   <--- Volume Name and Number combined
              -01JAN87.000   <--- Volume Date and Number combined
              -140045 .000   <--- Volume Time and Number combined

    Thå volumå numbeò maù bå anù numbeò betweeî 00° anä 999¬ oò betweeî A0° 
    anä Z99® Thió rangå provideó á maximuí oæ 360° volumeó anä wilì bå morå 
    thaî adequatå foò most¬ iæ noô alì floppù baseä disë systems.

    Thå  volumå  namå wilì bå á dasè followeä bù anù combinatioî  oæ  valiä 
    characteró whicè arå permitteä iî á filå name®  Thå volumå name¬  iæ iô 
    exists, will not be used by the cataloging system at this time.
.paŠ
    The volume date will be a dash followed by one of the two forms:

              -87JAN01.
    or
              -01JAN87.

    dependinç upoî thå implementioî preferred® Purå numeriã dateó shoulä bå 
    avoideä tï prevenô confusioî witè thå volumå time® Onå mighô reasonablù 
    argue that the date could be written year, month, day:

              -870101 .

    Thió  methoä ió acceptablå sï lonç aó thå rangå oæ yearó ió  restricteä 
    tï betweeî 2´ anä 9¹ sincå thå houró caî neveò exceeä 23® Iô presentó á 
    problem¬  however¬  wheneveò thå yeaò changeó froí 9¹ tï 00® Iô ió alsï 
    possiblå tï selecô á differenô prefiø foò thå datå anä time.

    Thå volumå timå wilì bå á dasè followeä bù thå timå iî  hours¬  minuteó 
    anä seconds® Thå houró wilì bå kepô iî militarù oò 24-houò timå tï makå 
    sorting easier. For example:

              -090015 .      <--- 09:00:15 AM
              -210015 .      <--- 09:00:15 PM

    Twï morå pieceó oæ informatioî abouô eacè volumå mighô bå includedº thå 
    amounô oæ availablå spacå remaininç oî thå volumå anä CRÃ oò  Checksum® 
    Alì oæ thió information¬ volumå name¬ seriaì number¬ date¬ time¬ space¬ 
    anä CRÃ wilì bå calleä thå volumå header® Iæ wå arå tï accomodatå theså 
    additional data, a different prefix (modified) may have to be selected.

.paŠ
                              THE MASTER CATALOG


    Thå masteò cataloç contains¬ amonç otheò things¬ thå namå oæ everù datá 
    seô containeä oî everù volumå (fixeä oò removable© thaô caî bå accesseä 
    bù thå system®  Iô maù alsï contaiî sucè thingó aó creatioî datå and/oò 
    time¬  datá seô size¬ checksuí oò CRC¬ numbeò oæ accesses¬ datå oæ lasô 
    access¬  statuó flags¬ backuğ frequency¬ datå oæ lasô backup¬ retentioî 
    cycle¬ locatioî oæ datá set¬ volumå number(s)¬ etc.¬ anä anù otheò sucè 
    informatioî aó maù bå relative.

    Iî additioî tï thå masteò catalog¬ anotheò filå calleä á Volumå Cataloç 
    maù bå required®  Thió cataloç mighô contaiî thå volumå headeró foò alì 
    volumes in the system.

    Wå caî no÷ consideò buildinç thå masteò anä volumå catalogs®  Wå  shalì 
    consideò twï casesº  volumeó witè anä withouô headers® Thå volumeó witè 
    headeró ió ratheò trivial®  Thå volumeó withouô headeró caî bå resolveä 
    iæ  thå cataloginç systeí ió alloweä tï generatå appropriatå headeró aó 
    the disks are entered into the system.

    Wå  caî furtheò assumå thå harä disë tï contaiî datá setó whicè maù  oò 
    maù noô bå residenô oî á removablå volumå (floppy© aó á backup®  Iô maù 
    or may not have volume headers for each logical sub-drive.

.paŠ
                              THE PROCESS BEGINS


    Wå  shalì no÷ assumå wå havå enougè availablå spacå oî thå harä disë tï 
    creatå  anä contaiî thå twï requisitå catalogs®  Thå softwarå haó  beeî 
    configureä for our system. A block diagram of the system follows:



                                  Z80 CPU
                                     |
                                     |
                                     |
     Physical Hard Disk Drive (1)    |            Logical Drives E-F
     +--------+--------+--------+----+---+--------+--------+-------+
     |        |        |        |    |   |        |        |       |
     |        |        |        |    |   |        |        |       |
    HÄ Å     HÄ Æ     HÄ Ç     HÄ È  |  HÄ É     HÄ Ê     HÄ Ë   HÄ L 
                                     |
                                     |
                                     |
                  Physical Floppies  | Logical Drives A-D
                  +----------+-------+-------+----------+
                  |          |               |          |
                  |          |               |          |
                FD A       FD B             FD C       FD D
                                      
                                      

    Attacheä  tï thå Z8° Centraì Processinç Uniô (CPU© ió onå physicaì harä 
    disë  drivå (6° MÂ Capacity© anä fouò physicaì floppù disë  driveó  (aô 
    1.² MÂ eacè ½ 4.¸ MB)® Eacè sub-drivå oæ thå harä disë ió labeleä anä á 
    logicaì uniô numbeò haó beeî assigneä (HÄ Å througè HÄ L¬ inclusive)® Á 
    similaò seô oæ logicaì unitó anä floppù disë drivå letteró arå showî iî 
    the diagram (FD A through FD D, inclusive).

    Wå wilì assumå thaô FÄ Á ió thå systeí disë anä ió neveò removed®  FÄ Á 
    anä FÄ Â arå 8¢ SSSD/DSDÄ anä FÄ Ã anä FÄ Ä arå 5.25¢ SSSD/DSDÄ drives® 
    Thå harä disë ió á 5.25¢ 5-platteò harä disk¬ divideä intï ¸ equaì sizå 
    logicaì sub-drives¬ eacè witè 7.6¸ MÂ oæ storagå capacity® Eacè logicaì 
    unit has user areas 00 - 15 inclusive.

    Finally¬  foò thå sakå oæ brevity¬  leô uó assumå thå systeí haó á reaì 
    timå clock¬  capablå oæ providinç thå correcô timå oæ daù anä date® Thå 
    format of the time and date are as follows:

                   YY MM DD       <-- Year, Month, Day

                   HH MM SS       <-- Hour, Minute, Second

    Both fields are kept in two forms: Ascii and BCD.

.paŠ
    Wå mighô begiî thió procesó now¬ bù submittinç eacè logicaì uniô oæ thå 
    harä disë tï thå prograí whicè wilì "create¢ entrieó iî botè thå volumå 
    anä  masteò catalogs®  Iæ thió prograí doeó noô finä thå datá sets¬  iô 
    wilì creatå them® Iæ thå datá setó arå found¬ thió prograí maù checë tï 
    seå  iæ thå logicaì uniô (volume© haó beeî previouslù processed®  Iæ iô 
    haó noô beeî processed¬ iô wilì bå addeä tï thå existinç catalog® Iæ iô 
    haó beeî processed¬ thå useò wilì bå prompteä tï decidå iæ thió logicaì 
    uniô shoulä replacå thå entrieó alreadù existinç oò verifù thå contentó 
    oæ thå volumå againsô thå masteò catalog®  Thå prograí wilì reporô  anù 
    descrepancies and prompt the user for appropriate input.

    Thå prograí whicè createó thå catalogó wilì reaä thå directorù  entrieó 
    anä calculatå thå amounô oæ spacå occupieä bù alì oæ thå datá sets®  Iô 
    wilì  alsï  calculatå thå logicaì unit'ó remaininç space®  Á CRÃ  valuå 
    wilì bå generateä foò eacè datá seô wheî iô ió processed®   Thå namå oæ 
    thå datá set¬  itó size¬  CRC¬  currenô datå anä time¬ anä logicaì uniô 
    anä useò areá wilì bå entereä intï thå masteò catalog® Filå attributes¬ 
    sucè aó $SYS¬  $R/Ï oò $DIR¬ wilì seô thå statuó flags® Iæ thå datá seô 
    comeó froí á "public¢ area¬ iô may alsï bå markeä for download status.

    Cataloç entrieó sucè aó retentioî cycle¬  backuğ frequency¬ etc.¬ coulä 
    bå establisheä aó defaultó iî thå beginninç oæ thå program¬ oò thå useò 
    could be prompted. The former is preferable.

    Eacè  logicaì uniô oæ thå harä disë ió processeä accordinglù tï providå 
    thå  basiã masteò catalog®  Thå masteò cataloç no÷ containó onlù  thoså 
    datá setó whicè arå oî thå harä disk®  (Perhapó á copù oæ thió filå maù 
    be maintained separately.)

    Thå  cataloç  prograí mighô no÷ bå instructeä tï begiî  cataloginç  thå 
    physicaì floppù disë units¬  beginninç witè thå systeí disk® Theså datá 
    setó arå theî addeä tï thå masteò catalog®  Afteò eacè floppù disë  haó 
    beeî entereä intï thå catalog¬  iô wilì contaiî thå volumå headeò anä á 
    copù oæ thå masteò cataloç whicè pertainó tï itó contents® Thió wå wilì 
    calì thå volumå tablå oæ contentó (VTOC)® Iô ió functionallù equivalenô 
    tï aî expandeä directorù buô ió á datá seô iî itó owî right.

    Oncå  thå floppù volumå haó beeî cataloged¬  thå operatoò wilì bå askeä 
    tï  placå anotheò disë (volume© intï thå samå drivå (excepô thå  systeí 
    disk)®  Thå nexô floppù drivå iî sequencå wilì theî bå  processed®  Thå 
    procesó  wilì  continuå  untiì  alì oæ thå physicaì  driveó  havå  beeî 
    processed®  Thå cataloç wilì no÷ returî tï thå firsô logicaì uniô afteò 
    thå systeí disë (FÄ B© anä procesó thå volumå iô contains® Thió procesó 
    wilì  continuå untiì alì physicaì floppù disketteó (volumes© havå  beeî 
    entereä intï thå masteò catalog.

    Duplicatå  datá seô nameó wilì noô bå entereä intï thå masteò  catalog® 
    Instead¬ á lisô oæ volumeó whicè contaiî thå samå datá seô namå wilì bå 
    generated®  Thió datá seô ió thå functionallù equivalenô tï thå cataloç 
    thaô ió currentlù generateä bù MCAT4µ anä MCAT505.

.paŠ
                            WHAT HATH GOD WROUGHT?


    Yoõ  mighô welì asë aô thió poinô whaô wå havå  accomplished®  Wå  havå 
    createä thå datá setó necessarù tï implemenô á direcô accesó managemenô 
    system® Wå no÷ kno÷ whicè volumeó contaiî whaô datá sets® Wå kno÷ wherå 
    everù  datá seô iî ouò possessioî resides®   Wå kno÷ thå numbeò oæ datá 
    setó whicè havå duplicateä filå names® Iî fact¬ wå eveî kno÷ everù datá 
    seô whicè ió currentlù on-line® Giveî thå righô utility¬ wå arå ablå tï 
    creatå á directorù oæ á volumå noô eveî oî thå system¡ Whù not¿ Wå kno÷ 
    everything there is to know about it. 

    Beforå wå caî begiî tï explorå ho÷ sucè datá setó arå used¬  wå musô bå 
    ablå tï understanä ho÷ programó anä processeó caî causå theså datá setó 
    tï bå changed®  Wå musô examinå whaô wå musô bå donå wheî á datá seô ió 
    created¬  modifieä oò updated¬ oò deleted® Jusô ho÷ dï wå kno÷ wheî anù 
    of the data sets have changed?

    Thå answeò ió bù monitorinç thå operatinç systeí functionó whicè  allo÷ 
    datá setó tï bå created¬ erased¬ modified¬ openeä anä closed® Iî short¬ 
    it means the operating system itself has to be modified!

    Oh¬  yoõ cry¡ É can'ô possiblù dï that® É don'ô havå thå sourcå code® É 
    aí  noô  á programmer®  Welì iô ió noô aó baä aó alì oæ that®  Whaô  ió 
    true¬  however¬  ió yoõ wilì havå tï givå uğ somå memorù spacå anä  adä 
    whaô  ió  calleä systeí overhead®  Systeí overheaä ió thå timå thaô  ió 
    requireä  tï monitoò thå operatinç systeí anä takå  appropriatå  actioî 
    wherå á datá seô ió concerned.

    Foò  thoså  programó thaô makå direcô BDOÓ calló tï  perforí  alì  disë 
    relateä functions¬  thå probleí ió relativelù simple® Á Residenô Systeí 
    Extensioî (RSX© ió created® Aó thå namå implies¬ aî RSØ liveó somewherå 
    iî reaì memorù (usuallù jusô belo÷ thå CCP)®  Iô ió resident¬ anä ió aî 
    extensioî  oæ thå reaì operatinç system®  Foò thoså systemó whicè  havå 
    banë switcheä memory¬ thå RSØ mighô welì livå there.

    Foò  thoså programó whicè makå direcô BIOÓ calls¬  thå probleí ió á biô 
    morå complex¬  buô essentiallù thå same®  Thå samå RSØ musô monitoò thå 
    BIOÓ calló anä takå appropriatå action® Thå RSØ musô monitoò botè calló 
    to the BDOS and the BIOS.

.paŠ
                               HOW DOES IT WORK


    Leô  uó  assumå yoõ wanô tï creatå á ne÷ filå witè youò editoò oò  worä 
    processinç program® Aó faò aó you¬ thå useò ió concerned¬ yoõ simplù gï 
    abouô youò businesó aó usual® Whaô happenó behinä thå sceneó ió oæ reaì 
    interest.

    Essentially¬  thå  editoò musô creatå á ne÷ datá set®  Wheî thå  editoò 
    calló BDOÓ tï opeî thå datá set¬ iô ió thå responsibilitù oæ thå RSØ tï 
    insurå  thaô á ne÷ entrù ió createä iî thå masteò  catalog®  Á  similaò 
    entrù  wilì  bå createä iî thå volumå cataloç iæ necessary®  Thå  entrù 
    wilì bå markeä temporarù untiì thå datá seô ió finallù closed® Wheî thå 
    datá  seô  ió closed¬  alì pertinenô datá wilì bå addeä tï  thå  masteò 
    cataloç (size¬  CRC¬  date/time¬ retention¬ backup¬ etc.)® Updatinç thå 
    masteò  cataloç onlù wheî thå datá seô ió closeä saveó time®  Iæ á datá 
    seô  ió  created¬  buô noô closed¬  thå facô wilì bå  reflecteä  bù  aî 
    appropriatå statuó biô iî thå masteò catalog® 

    Suppose¬  thaô  we'vå madå á mistakå iî thió filå anä decidå wå wanô tï 
    deletå (erase¬  purge© thå file®  Whaô dï wå reallù mean¿ Dï deletå thå 
    entrù froí thå masteò catalog¿ Oò dï wå sho÷ iô waó createä anä deleteä 
    on the same day, at different times? 

    Thå answeò shoulä bå obvious®  Wå keeğ thå entrù iî thå masteò catalog¬ 
    buô wå deletå thå physicaì datá seô anä itó relateä entrieó iî thå reaì 
    disë directorù foò thió logicaì unit® Witè thió method¬ wå caî discoveò 
    ho÷  datá seô nameó arå used¬  anä eveî thå frequencù oæ use®  Programó 
    thaô  coulä  makå  uså oæ  thió  information¬  woulä  receivå  ultimatå 
    responsibilitù  foò makinç thå mosô frequentlù useä datá setó availablå 
    in the shortest period of time.

    Thå algorithí foò thió methoä ió á simplå leasô recentlù useä (LRU)® Iî 
    thió method¬  datá setó witè thå leasô amounô oæ activitù woulä bå senô 
    tï aî archivå volume®  Oncå removeä froí thå mosô activå datá sets¬ thå 
    datá seô woulä bå writteî tï á floppù disk¬  anä perhaps¬  removeä froí 
    thå system®  Thå spacå iô occupieä iî thå mosô activå datá setó ió freå 
    for a newer, more active data set.

    Thió implies¬  incidentally¬  thaô onlù thå mosô activå floppù  volumeó 
    wilì bå includeä iî thå on-linå datá sets® Iô musô bå pointeä out¬ thaô 
    wå  musô  noô onlù havå á waù oæ mountinç requesteä datá sets¬  buô  wå 
    musô havå á similaò methoä oæ dismountinç datá setó thoså whicè requirå 
    immediatå off-linå storage®  Generally¬  theså wilì bå thå dailù backuğ 
    datá sets®  Theù mighô contaiî informatioî regardinç messagå baseó  anä 
    anù verù dynamiã file® Thå purposå ió tï insurå thaô wå caî bacë uğ onå 
    daù anä restorå ouò mosô volatilå datá sets®  Iî thió manner¬  wå woulä 
    be more likely to lose only one day's transactions.

    Datá setó whicè tenä tï gro÷ tï infinity¬  verù largå datá sets¬  coulä 
    bå maintaineä iî theiò entirty®  Extremelù large¬  verù slo÷ read/writå 
    storagå  device  woulä bå aî ideaì medium®  Eveî verù largå  write-oncå 
    optical memories would be of considerable value.
.paŠ
                    ABOUT THE OPERATING SYSTEM AND THE RSX


    Thå operatinç system¬  CP/Í oò compatible¬ onlù provideó thå mosô basiã 
    functionó necessarù tï writå effectivå programs® Iæ wå arå tï havå morå 
    functions¬  perhapó "higheò functions"¬  thaô coulä bå performeä bù thå 
    RSX¬   theî   individuaì   applicationó  coulä  calì  oî  theså   neweò 
    functions®  Iæ wå follo÷ thió tï itó logicaì conclusion¬  onlù thå mosô 
    often used functions would be available in the fastest computer memory.

    Richarä Conn'ó ZCPR³ anä brillianô enhancementó contributeä bù talenteä 
    artisans¬  ió á profounä examplå oæ thió technique® Iî effect¬ thå CP/Í 
    commanä processoò ió replaceä bù á morå intelligenô version®  Aó befitó 
    sucè aî undertaking¬ thå entirå substructurå oæ thå operatinç systeí ió 
    moved to accomodate additional subroutine storage and data set buffers.

    Thå subroutineó providå additionaì "resident¢ commandó and/oò functionó 
    tï controì thå flo÷ oæ processing®  Hence¬ iô caî bå seen¬ thaô loadinç 
    differenô portionó oæ operatinç system¬  aô differenô times¬ mighô welì 
    controì ho÷ thå entirå systeí functions.

    Anotheò examplå ió Waynå Masters§ anä Irö Hoff'ó BYE51°  program®  Thió 
    residenô  extensioî takeó controì oæ thå BDOÓ anä BIOÓ controì vectors® 
    Iô monitoró thå systeí calló anä interceptó thoså oæ interest® Iô quitå 
    literally, patches itself into the system.

    BackGrounder¬  Prinô Spooler¬ Datå Stampeò arå furtheò exampleó oæ thió 
    methoä oæ functionaì systeí expansion.

.paŠ
                                 IN CONCLUSION


          If you thought this was then end, then you are dead wrong!

    Thå neweò processors¬ namelù thå HD6418° anä Z280¬ foò thå 8-biô world¬ 
    arå welì adapteä tï thió typå oæ structure®  Whilå thå HD6418° doeó noô 
    havå alì oæ thå pagå faulô detectioî oæ thå Z280¬  iô caî bå effective® 
    Á greateò numbeò oæ "resident¢ functionó arå madå available¬ anä systeí 
    responså caî bå quitå dramatic.

    Thå Z280¬  oî thå otheò hand¬ caî handlå severaì "partitions¢ anä ió iî 
    effecô botè multi-tasksinç anä multi-user® Witè addressablå maiî memorù 
    expandablå tï 1¶ MB¬  managinç datá setó wilì becomå imperative® Foò wå 
    musô realizå thaô thå operatinç systeí, anä itó functionó, arå in fact,
    a very definite data set. Namely, the data set of available functions.

    Largå maiî memorieó allo÷ morå compleø operatinç systeí functionó tï bå 
    provideä  anä simplifù applicatioî programming®  Iæ manù  microcomputeò 
    systemó operatå á commoî operatinç system¬ theî applicatioî programó oî 
    theså systemó wilì becomå morå portable®  Onå oæ thå fineò exampleó  ió 
    the UNIX Operating System and its related language 'C'.

    Thå  Remotå Accesó Systeí Monitoò (RASM© anä thå Direcô Storagå  Systeí 
    Monitoò (DASM© arå buô twï projecô whicè requirå thå facilitieó wå havå 
    beeî discussing®  RASM¬ aó itó namå implies¬ monitoró modeí anä consolå 
    input¬ oî á remotelù accessiblå system® DASÍ monitoró anä controló datá 
    setó availablå foò systeí use.

    Wå  8-biô CP/Í compatiblå computeò useró havå beeî giveî aî opportunitù 
    tï  keeğ ouò welì loveä softwarå anä stilì enjoù thå benefitó  thaô  ió 
    experienceä bù similaò 16-biô counterparts® Iô ió uğ tï thoså oæ uó whï 
    sharå á concerî tï dï whaô wå can®  Aó wå work¬ collectively¬ wå caî bå 
    prouä  tï kno÷ wå havå salvageä whaô mighô otherwiså havå beeî á  dyinç 
    culture.

    Youò commentó shoulä bå iî thå forí oæ aî uploadablå "datá set¢ tï  thå 
    privatå  uploaä area®  Iæ thå commentó caî bå reasonablù explaineä iî á 
    public message, then that is preferable. Please direct your comments to


    G. Benson Grey, Sysop                   [503] 641-6101 voice
    Cedar Mill Z-Node  24                   [503] 644-4621 data
    12275 NW Cornell Rd, Ste 5              Available on PC Pursuit
    Portland,  OR   97229-5611

    Iæ yoõ havå downloadeä thió file¬ pleaså pasó iô alonç tï otheò systemó 
    that you call regularly. Thanks in advance for your contributions. Ben.


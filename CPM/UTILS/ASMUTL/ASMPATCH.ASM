;
;	ASM PATCH OF 1/8/79 BY DIGITAL RESEARCH
;		  (Revised 4/20/80)
;
;THIS PATCH FIXES CP/M 1.4 ASM.COM TO ALLOW LOWER CASE
;CHARACTERS IN DB'S
;
;05/27/79 FIX BUG WHICH WOULD NOT ALLOW '' TO BE
;	  USED IN STRING FOR SINGLE '.  BY WARD
;	  CHRISTENSEN.
;
;06/01/79 CHANGE TO PUSH-POP INSTEAD OF LOADING
;	  CHARACTER DIRECT. BY WARD CHRISTENSEN
;
;08/19/79 ADD CONDITIONAL ASSEMBLY FOR CP/M
;	  ON H8 OR TRS-80. BY KEITH PETERSEN, W8SDZ.
;
STDCPM	EQU	1	;TRUE IS STANDARD CP/M
ALTCPM	EQU	0	;TRUE IS H8 OR TRS-80
;
BASE	SET	0
;
	IF	ALTCPM
BASE	SET	4200H
	ENDIF		;ALTCPM
;
TOKEN	EQU	BASE+185H ;CURRENT SCANNER TOKEN
STRNG	EQU	3	;STRING CONST. TOKEN
TRANS	EQU	BASE+119EH ;SUBROUTINE TO TRANSLATE CASE
GNCN	EQU	BASE+11ADH ;LOC OF PATCHED CODE
PATCH	EQU	BASE+132DH ;LOC OF FREE AREA
;
	ORG	GNCN+6	;REPLACES 'CALL TRANS'
	JMP	PATCH
;
	ORG	PATCH
	PUSH	PSW
	LDA	TOKEN
	CPI	STRNG
	CNZ	TRANS	;TRANSLATE IF NOT STRING
	POP	PSW
	RET
;
	END


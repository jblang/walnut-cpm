		 INSTALLING NEWSYS.DOC	12/22/85

		     (Updating Your CPM+.SYS)

       To Enable Downloading In The Commodore 128 CP/M Mode
	 Converting NEWSYS.COM and IMP.COM to CP/M Format

This Text will explain how you will be able use the "CP/M Mode" of your
Commodore 128 for telecommunication via the modem (user port).

There are hundreds of CP/M Bulletin Boards (RCPM's) across the country
with thousands of public domain CP/M programs (free), information and
help that you will soon be able to access.  Most of these are listed
in a program called PDSE-nnn.LST and a shorter reference list called
PDFT-nnn.LST.  All but a few are free, unless calling long distance.

OBJECTIVE: To have an "updated" 128 CPM+ Operating System and a good
	   300/1200 bps CP/M telephone modem program that will allow
	   you direct access to CP/M files.  THE END OF CONVERSIONS!

PROBLEM 1: The original 128 CP/M+ operating system which was shipped
	   with your computer does not support the use of a modem.

	2: Now that an update program is available (NEWSYS.COM) which
	   fixes the first problem, how can you get it without the abil-
	   ity to use your modem in the CP/M mode??

SOLUTION:  Download the CP/M programs that you will need, using a 64 or
	   128 modem program.  Then convert them to CP/M format.

	   You can use either a "Punter" or "Xmodem" protocol terminal
	   program, depending on the protocol used by the particular
	   source.


			 WHAT YOU WILL NEED
			 ------------------

	   "NEWSYS.COM"

This program, from Commodore engineering, automatically updates your old
"CPM+.SYS" to a newer version which fixes the modem problem and speeds
up other functions.  It will enable use of the 300/1200 bps Commodore
1670 modem or other modems when using the 1011A adapter interface card.

	   "64CONVERT."

This utility converts programs that are in "64 disk format" over to
"CP/M disk format".

	   "IMP-C128.COM"

IMP-C128 is a Commodore 128 version of Irv Hoff's CP/M "IMP" telephone
modem program.	It will autodial the Commodore 1670, Hayes "AT" compat-
ible or Racal-Vadic modems.  It can also be used with other modems if
dialing is done manually.  It is the only modem program available that
has automatic 1k transmission size (saves 8-9% throughput over older
modem programs that can only send 128 characters per transmission) and
also is the only modem program having both KMD and MODEM7 batch modes.
(This allows automatic sending or receiving a number of files from RCPM
systems using the KMD file transfer program which has replaced the pro-
gram formely used at most RCPM systems called XMODEM.COM.)  It can be
used on any system that offers ASCII in the terminal mode and XMODEM
protocol (either CRC or checksum) in the file transfer mode.  It remains
the newest of the public domain modem programs.

			Files to get later
			------------------

	   "IMP.DOC"  (get this later)

Instruction file.  The "DOC" file is optional at this point as IMP dis-
plays a built-in "Command Menu" by typing "M" at the Command line.  Try
to use IMP itself to download "IMP.DOC".  This will save the 16 minutes
it would take to convert it to the new CP/M disk itself.  You will want
to get this program and make a copy on your printer, as it contains very
useful information on the full use of the IMP modem program.  IMP.DOC is
in the IMP244.LBR which is free and is available on RCPM systems around
the country.

	   "I2C8-1.ASM" (get this later)

This is the small file that is used to convert the standard IMP modem
program to the Commodore C128.	It has all the options on it that the
use can change if desired.  It will likely appear as "I2C8-1.AQM" which
is a "squeezed file".  (This is a means of compressing ASCII text files
so they only use about 2/3rds normal storage space - thus allowing more
files to be stored on a given disk as well as taking considerably less
time over the telephone to obtain.  You use a program called "USQ.COM"
to unsqueeze them on your own disk, for normal use.  You may never make
any changes in the options currently in use with IMP-C128.COM but unless
you get this file, you will not know what options you COULD be using.


			  Instructions
			  ------------

There have been many different methods for doing C64 to CP/M conversions.
The following method has been tested by several different users and has
worked suitably for them.

1. You must have two disk drives, #8 and #9.  (CP/M calls these A and B.)

2. From your CP/M mode, format two disks:

	1> "64 Single Sided Disk" (This disk will be used for the con-
	   vert program.)

		  NOTE: THIS MUST BE A CP/M C64 SINGLE-SIDED
			NOT A 128 SINGLE-SIDED FORMAT

	2> "C128 double sided disk", will be your new SYSTEM DISK.

3. From your "64 mode", format a regular 64 disk or select such a disk
   that has at least 230 blocks available.  (375 blocks available if
   planning to copy the IMP.DOC at the same time.)


	NOTE: At this point you will have four disks for
		this project, you will find it convenient
		to temporarily put a number on each, so
		the followin discussion can be accurately
		followed:

		1.  the C64 disk mentioned in paragraph 3 just now
		2.  the CP/M 64 single-sided disk from paragraph 2
		3.  the CP/M C128 double-sided disk from paragraph 2
		4.  the normal CP/M system disk used to boot CP/M


4. With disk 1 in drive #8 and using either a 64 modem program that has
   XMODEM protocol, a 64 Punter modem program or a 128 modem program
   with XMODEM protocol, download the following three programs to it:

		a) 64CONVRT	 (may go by other similar names)
		b) NEWSYS.COM	 (will modify the original BIOS)
		c) IMP-C128.COM  (modem program for use with CP/M)


     64CONVRT is a C64 "PROGRAM" file, and should be downloaded as such.

     NEWSYS.COM and IMP-C128.COM are going to be "converted" and MUST
     be downloaded as "SEQUENTIAL" files ONLY!	(If you take these two
     as "program" files, the conversion will NOT WORK.

     Your disk should now contain these files;

		64CONVRT	 (copied as a "program" file)
		NEWSYS.COM	 (copied as a "sequential file)
		IMP-C128.COM	 (copied as a "sequential file)

5. After downloading the files to your 64 diskette, insert disk 2 (the
   new CP/M 64 single-sided disk in drive #9.  Activate 64CONVRT in
   drive #8:
		    LOAD "64CONVRT",8 <ret>

   The program is menu driven:

	a. tells you to insert disks into #8 and #9 (already done)
	b. "any key" to continue
	c. type "0" for #8
	d. type "0" for #9
	e. disk #9 then reads and displays the CP/M directory
	f. then says "any key" to continue
	g. this brings up the menu with 6 choices
	h. select #3 choice: "CBM to CP/M"
	i. asks for:

		 CBM file name? NEWSYS.COM <ret>
				      |
				      \note a period is used here,
					 just like the original name

	j. then asks for:

		 CP/M user, filename, type
		 ? 0,NEWSYS,COM <ret>
		   |   |   |  |
		   |   |   |  \type of file
		   |   |   \note a comma is used here, NOT a period!
		   |   \name of file
		   \disk user area, be sure to use 0 here at this time


6. This is a 26-1/2k file with 212 records.  It will take about 11-1/2
   minutes to transfer, so do not get excited if 5-10 minutes have gone
   by and it is still not finished.  (BE PATIENT.)

7. After NEWSYS.COM has been transferred, then transfer IMP-C128.COM in
   a similar manner.  This is an 18k file with 144 records and will take
   about 7-3/4 minutes.

8. Once you have converted both of the CP/M files over to disk 2 in #9,
   remove both disks.  Lay aside the C64 disk (disk 1) from #8 (you are
   finished with it), put the normal CP/M system disk (disk 4) into #8
   (will now be called CP/M drive A:) and put disk 3 (the 128 CP/M
   double-sided disk) in drive B: (#9), then hit the reset key to boot
   the system in CP/M mode.

9. You will now move the two operating system files from the system disk
   (disk 4) in drive A: (#8) to the empty disk (disk 3) in drive B:
   (#9).  Use PIP to move the following programs to the new disk:

		A>PIP B:=A:PIP.COM <ret>
		A>PIP B:=A:CPM+.SYS <ret>
		A>PIP B:=A:CCP.COM <ret>

10. Remove both disks, you are done with the CP/M system disk (disk 4).
    Put disk 3 into drive A: (#8) and disk 2 into drive B: (#9).  You
    will need to reboot the system since you changed disks.  Now copy
    these two files:

		A>PIP A:=B:NEWSYS.COM <ret>
		A>PIP A:=B:IMP-C128.COM <ret>

11. Everything that is needed is now (finally!) on the A: drive (disk 3).

12. Now we will replace the old CPM+.SYS with the new one:

		A>NEWSYS <ret>

	This will give you a bit of explanation and have a
	line showing how to use the file, then returns to
	the main A> prompt again, now type:

		A>NEWSYS C <ret>

	and it will do its own thing, at the termination of which
	YOU ARE ALL DONE.  The directory will show three files in
	place of the original two:

		CPM+.SYS	(the new version)
		OLDCPM+.SYS	(the original version)
		CCP.COM 	(needed when booting)

13. All finished.  You can rename the modem program if you like:

		A>REN IMP.COM=IMPC-128.COM <ret>

    It was given the longer name so it would be properly identified as a
    C128 modem program when you were downloading it from another system
    that likely does not use this version and would not want to mix them
    up.

14. You may wish at this time to replace the CPM+.SYS file on your other
    bootable disks, so all have the new program and there will be no
    confusion.	You can do this with PIP as shown above.  Put the disk
    into drive B: and then type B: <ret> to select that drive.	Then type
    a CTL-C to log it in, else you may see an error when try to copy a
    file to that drive.

15. The rest of these comment involve using the IMP modem program.

16. When bringing up IMP, just say:

		A>IMP <ret>

    and you are in business.  Type:

		A>>COMMAND: M <ret>

    to get the first page of a 3-page menu.  Type:

		A>>COMMAND: CAL <ret>

    to see the numbers currently in the telephone library, ready for
    autodialing.  Type:

		A>>COMMAND: (escape char.) <ret>

    to see the list of current function key assignments.  These are
    activated when in the terminal mode by preceeding the number with
    an ESC character.  Type:

		A>>COMMAND: ? <ret>

    to see a list of the current parameters.  When/if you change any via
    the commands listed in the menu, you can check to see if your change
    is now in use.

		A>>COMMAND: T <ret>

    puts you in the terminal mode.  To return to command mode just type
    ESC-E.

17. Beyond this point you should get the IMP.DOC file and read it for
    additional information on how to transfer files, how batch mode can
    be used on RCPM systems offering the KMD.COM file transfer program,
    how IMP is the only modem program with automatic 1k protocol to save
    file transfer time, etc.  (About 8-9% at 1200 bps.)

		 NOTE:	The Commodore C128 is considerably
			slower than most CP/M computers, so
			the times shown for file transfers
			should be increased at least 20%
			for the C128.

    You will eventually want to get the IMP244.LBR which contains nu-
    merous additional files of interest (including the .DOC file) so
    the telephone library can be easily changed, the function key as-
    signments changed to the operator's preference, a note on how to
    select the options IMP offers for special purposes, etc.  This is
    free and is available on most RCPM systems, one that is easy to
    access is TCBBS in Detroit - (313) 846-6127.  Another which is in
    the Chicago area is also very easy to access: (312) 983-5147.


			      SUMMARY
			      -------

18. The original draft of this help guide was prepared by George Smonig.
    After helping several other people install the new CPM+.SYS version
    and get IMP.COM running, the final draft was made by Irv Hoff.  We
    hope you enjoy using it.

	Irv Hoff			George Smonig
	Los Altos Hills, CA		DataShall II Commodore BBS
	(415) 948-2166 - voice		(914) 961-7032

6. S T E P   8 :   U T I L I T Y   I N S T A L L A T I O N 


6.1. The Z3INS Utility

     Thå  Z3INÓ  utilitù ió designeä tï makå  thå  ZCPR³  utilitù 
installatioî  procesó simple®   Alì fileó tï bå installeä musô bå 
iî  thå currenô directorù wheî Z3INÓ ió executed®   Á *.ENÖ  filå 
foò thå targeô systeí anä aî installatioî filå (*.INS© containinç 
thå  nameó  oæ thå programó tï bå installeä musô alsï bå  iî  thå 
currenô directory.

     Z3INÓ readó iî aî Environmenô Descriptoò filå (*.ENV© anä aî 
Installatioî Filå (*.INS)®   Iô theî lookó foò lineó iî thå  filå 
containinç filå nameó (onå namå peò line© anä loadó thå indicateä 
files¬  tryinç  tï  instalì theí witè thå Environmenô  Descriptoò 
information.

     Z3INS is invoked by a command line of the following form:

          Z3INS mysys.ENV myinstal.INS

     Á  ZCPR³  Installatioî Filå ió á texô  filå  containinç  twï 
typeó  oæ linesº   á commenô line¬  whicè beginó witè á semicoloî 
(;)¬  anä  á  linå containinç aî unambiguouó filå  namå  (leadinç 
spaceó  arå noô significant)¬  whicè ió á filå tï  bå  installed®  
Foò example:


     ; This is an installation file for my new utilities
     ; UTIL1.COM and UTIL2.COM are going to be installed --
      util1.com
          util2.com
     ; UTIL3 is really neat
     util3.com

                 FIG 6-1: Sample Z3INS Installation File


     Caså ió noô significant®   Leadinç spaceó oî eacè  linå 
are ignored.  Any file name MUST be unambiguous.

     The next section shows the execution of a *.INS file.

.paŠ
6.2. Sample Session

B1:ASM>z3ins sys.env zcpr3.ins
Z3INS  Version 1.0
;
;  Installation Begins --
;

                      << Detail Left Out >>

;
;  Set 1
;
** Installing File ALIAS   .COM
** Installing File CD      .COM
** Installing File CMDRUN  .COM
** Installing File COMMENT .COM
** Installing File CPSEL   .COM
** Installing File CRC     .COM
** Installing File DEV     .COM
** Installing File DEVICE  .COM
** Installing File DIFF    .COM
** Installing File DIR     .COM
** Installing File ECHO    .COM
** Installing File ERASE   .COM
;
;  Set 2: Error Handlers
;
** Installing File ERROR1  .COM
** Installing File ERROR2  .COM
** Installing File ERROR3  .COM
** Installing File ERROR4  .COM
** Installing File ERRORX  .COM
** Installing File SHOW    .COM

                      << Detail Left Out >>

;
;  NOTE does not install because it is so small and really does
;  not need to know about ZCPR3
;
;note.com
;
;  Set 9:  Z3INS
;
** Installing File Z3INS   .COM
;
; End of ZCPR3 Installation
;
** Installation Complete **

                       FIG 6-2: Sample Run of Z3INS
.paŠ6.3. Assembling Distribution Files

     Thå  followinç fileó requirå theiò specializeä commanä fileó 
iî  ordeò tï bå assembled®   Iæ thå installeò ió  installinç  thå 
systeí foò thå firsô timå anä wisheó tï assemblå theså utilities¬ 
hå  maù havå tï follo÷ thå stepó outlineä iî thå commanä fileó iî 
order to perform the assemblies.

          Utility   Command File Required
          ALIAS.COM       ALIAS.ZEX
          ZEX.COM         ZEX.ZEX

     Thå  followinç  fileó  iî  thå  Phaså  É  distributioî   arå 
assembleä  bù  thå  commanä lineó (assuminç  thaô  Z3LIB.REÌ  anä 
SYSLIB.REÌ arå iî thå currenô directory and that $1 is the file):

          M80 =$1
          L80 $1,Z3LIB/S,SYSLIB/S,$1/N,/U,/E
Files:
     CD             CMDRUN         COMMENT        CPSEL
     CRC            DEV            DEVICE         DIFF
     DIR            ECHO           ERASE          ERROR1
     ERROR3         ERROR4         ERRORX         FINDF
     GOTO           HELPCK         IF             IFSTAT
     LDR            MCOPY          MENUCK         MKDIR
     NOTE           PAGE           PATH           PROTECT
     PWD            QUIET          RECORD         REG
     RENAME         SAK            SETFILE        SH
     SHCTRL         SHDEFINE       SHFILE         SHVAR
     SUB            TCCHECK        TCMAKE         TCSELECT
     UNERASE        WHEEL          XD             XDIR
     Z3INS          Z3LOC

     Thå  followinç  fileó  iî  thå  Phaså  É  distributioî   arå 
assembleä   bù   thå  commanä  lineó  (assuminç  thaô   VLIB.REL¬ 
Z3LIB.REL¬ anä SYSLIB.REÌ arå iî thå currenô directory):

          M80 =$1
          L80 $1,VLIB/S,Z3LIB/S,SYSLIB/S,$1/N,/U,/E
Files:
     ERROR2         HELP           MENU           SHOW

     Thå  followinç  fileó  iî  thå  Phaså  É  distributioî   arå 
assembleä  bù  thå  commanä lineó (assuminç  thaô  Z3LIB.REÌ  anä 
SYSLIB.REÌ  arå  iî thå currenô directory© iæ thå TIMÅ optioî  ió 
enabled:

          M80 =$1
          L80 $1,TIMELIB/S,Z3LIB/S,SYSLIB/S,$1/N,/U,/E
Files:
     HELPPR         PRINT

     Fileó  distributeä  iî  Phaså  IÉ  wilì  bå  provideä   witè 
associateä documentatioî oî theiò assemblù procedures.

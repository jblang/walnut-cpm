




                            PACKAGE IV:  INSTALLATION

         17. THE ZCPR3 INSTALLATION GUIDE.............................361

         18. OVERVIEW of ZCPR3 INSTALLATION...........................362
             18.1. Introduction.......................................362
                   18.1.1. Operating System Memory Images.............362
                   18.1.2. System Segments............................363
                           18.1.2.1. Flow Command Packages............363
                           18.1.2.2. Input/Output Packages............364
                           18.1.2.3. Resident Command Packages........364
                           18.1.2.4. Environment Descriptor...........364
                           18.1.2.5. ZCPR3 Named Directories..........364
                   18.1.3. Utilities..................................365
                   18.1.4. Other Basic Concepts.......................365
                           18.1.4.1. Command Search Hierarchy.........365
                           18.1.4.2. Command Search Path..............366
             18.2. SYSGEN Memory Images...............................367
             18.3. System Segments....................................368
             18.4. Utilities..........................................368
             18.5. Installation Steps.................................370
             18.6. Operational ZCPR3 System...........................371
                   18.6.1. Memory Image...............................371
                   18.6.2. System Segments............................372
                   18.6.3. Utilities..................................373
             18.7. Software Required for Installation.................373
                   18.7.1. Commercial Software........................373
                   18.7.2. System Segment Software....................374
                   18.7.3. Other Useful Files.........................374
                   18.7.4. Files Required for Installing ZEX..........375
                   18.7.5. Required Distribution Files................375
                   18.7.6. Useful Distribution Files..................375
             18.8. Required Hardware..................................376
                   18.8.1. Hardware Required for Installation.........376
                   18.8.2. Hardware Required for Running ZCPR3........376

         19. STEP 1: SELECTING the FEATURES...........................377
             19.1. Features of ZCPR3..................................377
             19.2. Standard Overhead..................................377
                   19.2.1. External Stack.............................378
                   19.2.2. Command Line Buffer........................378
                   19.2.3. Memory-Based Named Directory...............379
                   19.2.4. External File Control Block................379
                   19.2.5. Message Buffers............................379
                   19.2.6. Shell Stack................................380
                   19.2.7. Environment Descriptor.....................380
             19.3. Flow Command Packages..............................380
             19.4. Input/Output Packages..............................381
             19.5. Resident Command Packages..........................381
             19.6. Other Buffers......................................381
                   19.6.1. External Path..............................381
                   19.6.2. Wheel Byte.................................382




                                                           CONTENTS








         20. STEP 2: ZCPR3 MEMORY STRUCTURE...........................383
             20.1. Z3BASE.LIB.........................................383
             20.2. Z3BASE Header......................................383
             20.3. Z3BASE Body........................................385
                   20.3.1. Version Numbers, Memory Size, and Base.....385
                   20.3.2. Processor Selection........................385
                   20.3.3. External Path..............................386
                   20.3.4. Wheel Byte.................................386
                   20.3.5. CCP Location...............................386
                   20.3.6. RCP Location...............................387
                   20.3.7. IOP Location...............................387
                   20.3.8. FCP Location...............................387
                   20.3.9. ENV Location...............................387
                   20.3.10. Shell Stack...............................388
                   20.3.11. ZCPR3 Messages............................388
                   20.3.12. External FCB..............................388
                   20.3.13. Named Directory Buffer....................388
                   20.3.14. Command Line Buffer.......................389
                   20.3.15. External Stack............................389
                   20.3.16. User Equates..............................389

         21. STEPS 3-6: INSTALLATION..................................390
             21.1. Step 3: Modifying the BIOS Cold Boot Routine.......390
                   21.1.1. CBIOSHDR.LIB -- BIOS Configuration File....390
                   21.1.2. CBIOSZ -- Selections from a ZCPR3 BIOS.....393
             21.2. Step 4: Editing Z3HDR.LIB..........................405
                   21.2.1. Basic System Definitions...................405
                   21.2.2. Default File Types.........................406
                   21.2.3. SUBMIT File Processing.....................406
                   21.2.4. Command Prefix.............................406
                   21.2.5. Command Attributes.........................406
                   21.2.6. ZCPR3 Resident Command Activation..........407
                   21.2.7. ZCPR3 Resident Command Table...............408
                   21.2.8. Controls on ZCPR3 Resident Commands........410
                   21.2.9. Path Definition............................412
                   21.2.10. DU and DIR Controls.......................414
                   21.2.11. Command Line Buffer Control...............416
                   21.2.12. CMDRUN -- Extended Command Processing.....417
                   21.2.13. Flow Command Facility.....................417
                   21.2.14. Miscellaneous Equates.....................418
             21.3. Step 5: Overlaying the old BIOS and the CCP........419
             21.4. Step 6: Implanting the Operating System Image......419
             21.5. Sample Session.....................................419
                   21.5.1. Assembling SYSENV..........................420
                   21.5.2. Assembling SYSNDR..........................421
                   21.5.3. Assembling SYSIOP..........................422
                   21.5.4. Assembling SYSRCP..........................423
                   21.5.5. Assembling SYSFCP..........................424
                   21.5.6. Creating MYTERM.Z3T via TCSELECT...........425
                   21.5.7. Recap......................................426
                   21.5.8. Assembling the CBIOS.......................426
                   21.5.9. Assembling the ZCPR3 CPR...................426
                   21.5.10. Obtaining the Operating System Image......427
                   21.5.11. Patching the CP/M System Image............428
                   21.5.12. Placing the Operating System Image........429


                                                           CONTENTS









         22. STEP 7: SYSTEM SEGMENTS..................................430
             22.1. Resident Command Packages..........................430
                   22.1.1. CP Command.................................431
                   22.1.2. DIR Command................................431
                   22.1.3. ERA Command................................432
                   22.1.4. LIST and TYPE Commands.....................433
                   22.1.5. PEEK and POKE Commands.....................434
                   22.1.6. PROT Command...............................435
                   22.1.7. REN Command................................435
                   22.1.8. REG Command................................436
                   22.1.9. WHL Command................................436
                   22.1.10. NOTE Command..............................438
                   22.1.11. ECHO Command..............................438
             22.2. Flow Command Packages..............................439
                   22.2.1. IF Negation................................439
                   22.2.2. IF:  T (True) or F (False).................440
                   22.2.3. IF:  EM (Empty)............................440
                   22.2.4. IF:  ER (Error)............................440
                   22.2.5. IF:  EX (Exist)............................441
                   22.2.6. IF:  IN (Input)............................441
                   22.2.7. IF:  NU (Null).............................441
                   22.2.8. IF:  n (Register Value)....................442
                   22.2.9. IF:  WH (Wheel)............................442
                   22.2.10. IF:  TC (TCAP)............................442
                   22.2.11. IF:  fcb1=fcb2............................443
                   22.2.12. COMIF - Run IF.COM........................443
                   22.2.13. NOISE - Have FCP Print IF Status..........443
             22.3. Input/Output Packages..............................444
             22.4. Named Directory Files..............................444
             22.5. TCAP Files.........................................446
             22.6. Environment Descriptor.............................446

         23. STEP 8: UTILITY INSTALLATION.............................451
             23.1. The Z3INS Utility..................................451
             23.2. Sample Session.....................................452
             23.3. Assembling Distribution Files......................453




















                                                           CONTENTS








         24. The Z3TCAP FACILITY......................................454
             24.1. ZCPR3 Terminal Capabilities (TCAP).................454
             24.2. Internal Structure of a Z3T File...................455
                   24.2.1. Terminal Name..............................456
                   24.2.2. Arrow Keys.................................456
                   24.2.3. Function Delays............................457
                   24.2.4. Clear Screen Sequence......................457
                   24.2.5. Cursor Motion (GOTOXY) Sequence............458
                   24.2.6. Clear to End of Line.......................461
                   24.2.7. Begin and End Highlighting.................461
                   24.2.8. Terminal Init and Deinit...................462
             24.3. Terminal Control Sequences 1 (General).............462
             24.4. Terminal Control Sequences 2 (Cursor Motion).......463
             24.5. Overview of VLIB...................................465
             24.6. Standard ZCPR3 TCAP File...........................465
             24.7. TCAP Check Program.................................465
             24.8. TCAP Entry Definition Program......................466
             24.9. TCAP Entry Selection Program.......................470

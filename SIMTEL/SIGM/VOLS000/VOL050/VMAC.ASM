;
;VMAC --
;  MACRO ASSEMBLER "MAC" CHANGES TO DISABLE 8080 OPCODES FOR CROSS-ASSEMBLY
;    WORK
;  THIS PATCH WAS ORIGINALLY SUPPLIED WITH MY MAC MANUAL -- RLC
;  THIS IS TO BE PATCHED INTO MAC USING DDT.  AFTER THE PATCH IS COMPLETE,
;    PERFORM A "SAVE 46 XMAC.COM" TO CREATE XMAC.COM.
;
; RESERVED WORD PATCHES ADDED BY SHAWN EVERSON  10/3/81
;
;
RT	EQU	25	; 8080 REGISTER NAME
PT	EQU	26	; PSEUDO OPCODE TYPE
TAREA	EQU	2561H	; FREE AREA IN TOKEN MODULE
TRAIL	EQU	'@'	; CHAR. TO REPLACE LAST LETTER OF RESERVED WORDS WITH
 
;
	ORG	2444H	; OVERLAY INXH - MOV B,M - RET
	JMP	TAREA
 
;
	ORG	TAREA
 
;  TYPE IS IN THE ACCUMULATOR
	CPI	RT	; BELOW RT IF ARITHMETIC OPERATOR
	JC	TYPEOK
	CPI	PT	; PSEUDO OP?
	RNZ		; RETURN WITH NON-ZERO FLAG
 
;  OTHERWISE, PSEUDO-OP OR ARITHMETIC OP
TYPEOK:
	INX	H
	MOV	B,M
	CMP	A	; SET ZERO FLAG
	RET
;
;LOCATION OF RESERVED WORD <IF>
;
	ORG	214AH
	DB	'I',TRAIL
;
;LOCATION OF RESERVED WORD <OR>
;
	ORG	2154H
	DB	'O',TRAIL
;
;LOCATION OF RESERVED WORD <AND>
;
	ORG	2167H
	DB	'AN',TRAIL
;
;LOCATION OF RESERVED WORD <END>
;
	ORG	2185H
	DB	'EN',TRAIL
;
; LOCATION OF RESERVED WORD <LOW>
;
	ORG	219DH
	DB	'LO',TRAIL
;
;LOCATION OF RESERVED WORD <MOD>
;
	ORG	21A3H
	DB	'MO',TRAIL
;
;LOCATION OF RESERVED WORD <NOR>
;
	ORG	21AFH
	DB	'NO',TRAIL
;
;LOCATION OF RESERVED WORD <SET>
;
	ORG	21DFH
	DB	'SE',TRAIL
;
;LOCATION OF RESERVED WORD <ELSE>
;
	ORG	220DH
	DB	'ELS',TRAIL
;
;LOCATION OF RESERVED WORD <HIGH>
;
	ORG	2215H
	DB	'HIG',TRAIL
;
;LOCATION OF RESERVED WORD <NAME>
;
	ORG	2225H
	DB	'NAM',TRAIL
;
;LOCATION OF RESERVED WORD <PAGE>
;
	ORG	2229H
	DB	'PAG',TRAIL
;
;LOCATION OF RESERVED WORD <LOCAL>
;
	ORG	225CH
	DB	'LOCA',TRAIL
;
;LOCATION OF RESERVED WORD <MACRO>
;
	ORG	2261H
	DB	'MACR',TRAIL
;
;LOCATION OF RESERVED WORD <TITLE>
;
	ORG	226BH
	DB	'TITL',TRAIL
;
;LOCATION OF RESERVED WORD <PUBLIC>
;
	ORG	227CH
	DB	'PUBLI',TRAIL
;
;LOCATION OF SIGNON MESSAGE <CP/M MACRO ASSEM 2.0>
;
	ORG	2CD3H
	DB	'CP/M MACRO ASSEM 2.',TRAIL
;
; TYPE OF SOURCE FILE TO EXPECT
;
	ORG	25DCH
	DB	'VOC'
;
	END
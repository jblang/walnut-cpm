
SIG/M volume 13		a) MITS to CP/M file conversion system
			b) HELP file system
			c) related system support programs
                        d) FIG-FORTH 1.1 system

number	name		size	description

13.1	MITSCNVT.ASM	28K	MITS to CP/M file conversion
13.2	MITSCNVT.COM	 7K	   /
13.3	MITSCNVT.CPM	 3K	  /
13.4	MITSCNVT.DOC	 7K	 /
13.5	MITSCNVT.HEX	 8K	/

13.6	ABORTSUB.COM	 2K	HELP file system
13.7	HELP.ASM	13K	       /
13.8	SYSLIB.HLP	37K	      /
13.9	SYSLIB.REL	 9K	     /
13.10	HELP.COM	 2K	    /
13.11	MASM.SUB	 1K	   /
13.12	PHELP.COM	 2K	  /
13.13	PHELP.MAC	 6K	 /
13.14	HELP.DOC	 4K	/

13.15	SD-2/6.ASM	18K	updated SUPER DIRECTORY display
13.16	SD.COM		 2K	/	
13.17	ENTAB.ASM	 6K	space suppression program
13.18	ENTAB.COM	 1K	/
13.19	UTIL.FOR	 2K	FORTRAN array handling subroutine
13.20	LOOPBAK1.BAS	 2K	PMMI loop back test

13.21   FORTH11.ASM     40K     FIG-FORTH version 1.1
13.22   FORTH11.COM     23K      /
13.23   FORTH11.DOC      4K     /  

FORTH.DOC


NOTE from CALAMITY CLIFFS COMPUTER CENTER  -  9/1/80

The FORTH11.ASM file as it stands is apparently set up to run on a
HEATH system.  We have no information on the function of any of the
labels in the source listing, and as there is no (or very little)
useful commenting in the source listing regarding what code is hard-
ware dependent and how it should be modified for use on other systems,
we offer this program with the advice:

    ******  CAUTION  >>>>  CAVEAT EMPTOR  <<<<  CAUTION  ******

Before attempting to use or modify the program, it is advised that the
complete documentation be procured from the FORTH INTEREST GROUP.  In
addition it might be a good idea to contact Rick Schaeffer for clari-
fication concerning the uncertain function of much of the code in the
program.  The only thing that we can attest to at the present time is
that we have successfully assembled the code, as you see it here, with
the CP/M 2.2 Digital Research assembler without error.  We have not
tried to run the program, as the hardware dependencies have not been
identified with certainty.  In addition, we have no idea whether or not
it will run successfully under CP/M 2.2.

                                 -Calamity Cliffs Computer Center


THIS DOCUMENTATION SUPPLEMENTS THE ASSEMBLER SOURCE FOR FIG-FORTH WHICH
RESIDES HERE AS FORTH11.ASM.  THIS SOURCE IS PROVIDED THROUGH THE COURTESY
OF THE FORTH INTEREST GROUP, P.O. BOX 1105, SAN CARLOS, CA.  94070
AND WAS ENTERED AND DEBUGGED BY RICK SCHAEFFER, 2011 AZTEC DR. BLACKFOOT #1
NORTH LITTLE ROCK, AR. 72116.

THIS COPY OF FIG-FORTH HAS BEEN DE-BUGGED IN THAT IT IS RUNNING ON MY
H8 SYSTEM UNDER CP/M VERSION 1.43.  AFTER SEVERAL ABORTIVE ATTEMPTS,
I SUCCEEDED IN DOWN LOADING IT TO MICRONET BUT I HAVE NO WAY OF KNOWING
IF THERE WERE ANY ERRORS IN TRANSMISSION SINCE I DO NOT HAVE ANY WAY
OF HAND SHAKING WITH MNET.  ON THE VERSION THAT I HAVE RUNNING, I HAVE
CHANGED SOME OF THE ADDRESSES TO MAKE ROOM FOR MORE DISK BUFFERS, HOWEVER,
THIS COPY IS INTACT AS PRINTED IN THE FIG-FORTH ASSEMBLY LISTING.  THIS
SHOULD MAKE IT RELATIVELY EASY FOR INTERESTED USERS TO GET THE SYSTEM RUNNING
EVEN IF SOME OF THE DATA WAS LOST IN TRANSMISSION BECAUSE THE ASSEMBLED
ADDRESSES SHOULD BE THE SAME AS THEY APPEAR IN THE FIG LISTINGS (THIS IS
FOR FIG-FORTH VERSION 1.1....BY THE WAY).  YOU SHOULD HAVE THE FIG
MODEL MANUAL AND THE FIG ASSEMBLY SOURCE LISTING BEFORE ATTEMPTING TO USE
THIS.   HOPEFULLY, AT LEAST THIS SAVES A *LOT* OF TYPING FOR SOMEONE!
GOOD LUCK!
RICK SCHAEFFER (70120,174)


OK



 
          Program HELP

        SOURCE LANGUAGE CP/M ASSEMBLER..  HARDWARE REQUIRED   CRT 24x80..

        MEMORY REQUIRED   Depends on HELP File Loaded (56K Max)..........

        DESCRIPTION OF WHAT IT DOES:

          HELĞ  ió  á prograí whicè provideó aî interactivå onlinå  documen
tatioî system®   Witè thå supplieä HELĞ Files¬  HELĞ displayó selecteä  sec
tionó  oæ  thå  HELĞ Fileó tï thå useò onå screeî displaù aô  á  time®   Alì 
outpuô ió orienteä foò displaù oî á 2´ linå ø 8° columî CRT.
          Twï typeó oæ HELĞ Fileó arå supporteä bù thå HELĞ program®   Theså 
arå indexeä anä non-indexed®   Witè á non-indexeä HELĞ File¬  HELĞ  displayó 
thå  entirå filå tï thå useò onå screen-displaù aô á time®   Witè aî indexeä 
HELĞ  File¬  HELĞ displayó á menõ oæ thå sectionó oæ thió HELĞ Filå  tï  thå 
useò anä allowó hií tï selecô aî item®   Single-characteò inpuô ió employed®  
Oncå selected¬ HELĞ jumpó tï thaô sectioî anä displayó iô onå screen-displaù 
aô á time.
          Thå useò maù returî tï CP/Í aô anù time¬  anä witè aî indexeä HELĞ 
Filå  maù returî tï thå menõ aô anù time®   Thå filå HELP.HLĞ telló thå useò 
ho÷ tï writå hió owî HELĞ Files.
          Alì HELĞ Fileó havå á namå oæ thå forí 'filename.HLP'.

        HOW TO USE IT:
          HELP is invoked by CP/M commands of the following forms --

               HELP
               HELP d:filename

          Thå forí withouô á filå namå simplù giveó á basiã built-iî  intro
ductioî  tï thå HELĞ prograí iæ thå filå HELP.HLĞ ió noô oî thió  disk®   Iæ 
HELP.HLĞ  ió oî thió disk¬  iô ió reaä anä displayed®   Thå seconä forí dis
playó  thå  contentó oæ thå indicateä HELĞ namå  'filename.HLP'®   Thå  disë 
drivå parameteò 'd:§ ió optional.


          SPECIAÌ NOTEº   Thå HELĞ commanä anä somå oæ thå associateä  *.HLĞ 
fileó  supplieä  witè  thió submissioî arå beinç distributeä  witè  productó 
marketeä bù Supersofô Associateó oæ Champaign¬  IL®   É aí thå authoò oæ thå 
encloseä programó anä *.HLĞ files®   É aí placinç theí iî thå publiã domain» 
theså  programó  anä  *.HLĞ  fileó arå simplù  beinç  includeä  iî  marketeä 
packageó anä noô beinç solä oæ anä bù themselves.

          Program HELP (Details on another disk)
          Program PHELP
          Library SYSLIB
          Program ABORTSUB

        SOURCE LANGUAGE  M80 Assembler    HARDWARE REQUIRED  Hard Copy   

        MEMORY REQUIRED   Varies with HELP File (56K Max) ...............Š
        DESCRIPTION OF WHAT IT DOES:
          PHELĞ  ió  á  companioî tï thå HELĞ prograí (alsï  submitteä  tï 
SIG/M)®  PHELĞ printó thå contentó oæ á HELĞ filå oî thå CP/Í LSTº device®  
Thå outpuô ió paged¬  eacè pagå containinç onå screeî displaù aó iô  woulä 
be generated by the HELP program.

        HOW TO USE IT:
          PHELP is invoked by the following CP/M command line --

               PHELP d:filename <header text>

          PHELĞ  wilì prinô thå indicateä HELĞ Filå nameä  'filename.HLP'®  
Thå  disë  specificatioî 'd:§ anä thå <headeò text¾ arå  optionaì  (headeò 
texô  neeä  noô  bå encloseä iî anglå brackets)®   Internaì tï  thå  PHELĞ 
prograí arå thå specificationó oæ thå user'ó printer®  Iô ió seô foò á TTÙ 
Modeì  4³  aó É submitteä thå program¬  anä PHELĞ musô bå  reassembleä  tï 
change these settings (51 physical lines/page, 40 text lines/page).

          SYSLIÂ ió thå librarù É designeä whicè musô bå useä tï  assemblå 
PHELP with M80.  Use the indirect command file 'MASM.SUB' to do this:

               SUBMIT MASM PHELP

          Thå   routineó  iî  SYSLIÂ  arå  describeä  iî  thå  HELĞ   filå 
SYSLIB.HLP.

          ABORTSUÂ ió á prograí requireä bù MASM.SUB®  Iô permitó abnormaì 
terminatioî  oæ  á SUBMITteä file®   Issuå thå followinç commanä foò  morå 
information:

               ABORTSUB /?




                         SIGNED  Richard Conn .................

                         DATE 4 Feb 81  .......................





	Thió elemenô containó thå documentatioî foò MITSCNVT.

MITSCNVÔ  ió á prograí whicè operateó undeò CP/Í anä enableó  thå 
useò  tï  lisô thå directorù anä converô MITÓ ALTAIÒ  (TÍ  Perteã 
Computeò  Corp© disë fileó tï CP/Í files®   Thå reasoî conversioî 
ió  requireä ió thaô thå disë formató arå differenô anä thaô  thå 
ALTAIÒ DISË ió á harä sectoreä disë whicè containó 3² sectoró  oæ 
13· byteó eacè peò track® Á CP/Í compatablå disë ió sofô sectoreä 
anä ió composeä oæ 2¸ sectoró oæ 12¸ oò 25¶ byteó eacè sector.

Thå ALTAIÒ disë ió capablå oæ containinç á 25µ entrù directorù oî 
eacè disë anä eacè directorù entrù "points¢ tï á threadeä lisô oæ 
sectors®   Iî ordeò tï ensurå thå integritù oæ thå threadeä list¬ 
eacè sectoò iî thå lisô containó á singlå bytå whicè ió thå "filå 
number¢  - aî integeò calculateä froí thå locuó oæ thå  directorù 
entry®   If¬  durinç  operationó  oî thå chain¬  thå filå  numbeò 
changeó á 'filå linë error§ ió giveî anä thå prograí aborts®  Thå 
calculatioî foò thå filå numbeò ió giveî erroneouslù iî thå  MITÓ 
documentatioî anä ió correcteä here:

	8*SECTOR+(SLOT+1)

Wherå  SECTOÒ ió thå directorù sectoò numbeò (0-31© iî whicè  thå 
filå  namå  ió founä anä SLOÔ ió thå grouğ  numbeò oæ á  1¶  bytå 
widå directorù entrù oæ thå format:

Bytes	Description
------------------------------------------------------
00-07	ASCII File Name - if the first character is a
	zero (binary zero) the entry is ignored.  If
	it is 0ff (all one bits) this is the last entry
	in the directory.  An ignored entry  is the
	result of deleting a file in the MITS directory.

 08	Track address of the first sector in the file.
	Track 0-5 are never used as they are 'system'
	tracks.  Track 70 is the directory track.

 09	Sector number of the first sector of the file.
	Sectors are always 0,8,16 or 24.  Sectors are
	allocated in groups of eight.  There is no
	pattern for it, but, because of latency consid-
	erations odd numbered sectors are 16+sector number
	AND 1Fh away from the even sector in a logical
	sense. My calculations indicate this is a poor
	choice and if you have ever heard ALTAIR Disk
	Extended Basic or DOS run, you'll know its not
	too good.

 10	Flag to indicate file organization - 4=random
	2=sequential

11-15	Wasted bytes  NOTE: at one time or another the
	program MITSCNVT uses these bytes to store some
	information about each file -not  on the diskŠ	but in memory.

----------------------------------------------------------
	Aó   aî   examplå  leô  må  uså  thå  filå  &OCTBIÎ   foò 
illustratioî purposes®   Iô - quitå arbitrarilù - wilì bå assumeä 
tï starô iî tracë 7² sectoò 0®  Thió woulä bå itó directorù entrù 
iæ iô werå á sequentiaì file:
__________________________________________________________
|  1  |  2  |  3  |  4  |  5  |  6  |  7  |  8  |  9  |....
----------------------------------------------------------
   &     O     C     T     B     I     N     b    72

----------------------------------------------------------
|  10 |  11 |  12 |  13 |  14 |  15 |  16 | byte number
----------------------------------------------------------
   0     2     unused bytes------------>

Iæ thió werå thå 5tè entrù iî directorù sectoò zerï iô woulä filå 
numbeò 5.

	Movinç alonç iî thå examplå eacè datá filå beginó witè  á 
formaô iî whicè thå datá arå embedded.

The format is as follows:

Byte	Description (For Sequential files)
-----------------------------------------------------------
00	Track number +80h.  This high order bit must be set
	for every track number.  The physical track is
	identified in every sector on that track in this
	manner.

01	Physical sector number of each sector.  Every sector
	is identified this way. Sectors are numbered 0-31.

02	File number.  If =0 then this sector is NOT in use
	at this time.  (When a file is deleted you have to
	wait for each sector in the chain to be rewritten so
	that the file number can be set to zero).

03	Number of data bytes written in this sector

04	Checksum of all data in the sector except bytes 0,1,4
	and 136.  Byte 135 is also not used in the checksum
	calculation.  The checksum is the sum of all of the
	data without regard to overlow as done in an eight bit
	register.

05	Track number of the NEXT data sector in the chain.

06	Sector number of the next data sector in the chain.
	If track and sector number are both zero there is no
	more file (EOF).

07-134	128 words of data.  If the first byte is ffh then theŠ	file is binary.  If the first byte is other than ffh
	then the file is ASCII.  The first byte is the
	first byte of the first sector of the file - not the
	first byte of any sector.

135	Check byte - always ffH.  This is used to ensure that
	everything else in the sector was in the right place.

--------------------------------------------------------------

	Eacè  oæ  thå  byteó iî theså sectoró arå linkeä  tï  thå 
otheò sectoró iî á "forward¢ directioî untiì byteó 5+¶ arå  zero®  
Thió signaló thaô thå currenô datá blocë ió thå lasô blocë iî thå 
file®   Thå  directorù  sectoró arå locateä iî  tracë  70®   Eacè 
directorù  sectoò  beginó iî thå 8tè bytå oæ thå physicaì  sectoò 
(thå firsô · byteó arå garbage).


USE OF THE PROGRAM:
__________________

	Thå prograí acceptó twï typeó oæ input®   Thå firsô  typå 
oæ  inpuô ió á disë numbeò prefixeä bù aî equaló sign®  Thió wilì 
resulô  iî  recoverù oæ thå MITÓ directorù oî thaô disë  anä  thå 
listinç oæ thaô directory®  Aó aî example:

			=5

wilì  resulô  iî  selectioî oæ disë µ anä  thå  recoverù  oæ  thå 
directorieó oî thaô disë whicè wilì bå listed.

	Thå  seconä typå oæ inpuô ió á CP/Í filå namå followeä bù 
á filå type¬  aî equaì sigî anä á MITÓ filå namå anä disë number®  
Thió wilì searcè thå directorù oî thå specifieä MITÓ disk¬ locatå 
thå filå anä writå iô oî thå CP/Í disë specified®  Aó examples:

  (1) CPMFILE.MIT=ZCTABLE,0
  (2) DIET.BAS=DIET,0
  (3) OCTOCT.ASM=&OCTOCT,2

Iî  examplå (1© thå filå 'ZCTABLE§ locateä oî MITÓ disë  zerï  ió 
copieä  ontï  thå  CP/Í disë aó filå CPMFILE.MIT®   Iî  thå  nexô 
example¬  (2)¬  filå  DIEÔ  oî disë zerï ió copieä tï  CP/Í  filå 
DIET.BAS®   Iî thå lasô example¬  MITÓ filå &OCTOCÔ oî MITÓ  disë 
twï  ió copieä tï CP/Í filå OCTOCT.ASM®   Thuó thå MITÓ fileó arå 
alwayó  oî thå righô sidå oæ thå equaló sigî anä thå  CP/Í  fileó 
arå  oî thå lefô hanä side®   Notå thaô aî ambiguouó filå namå ió 
noô permitteä becauså thå CP/Í fileó arå opeî foò writing.

	Becauså thå fileó arå accepteä iî lisô form¬  thå prograí 
maù bå useä aó á submiô job®   Problemó witè thió prograí maù  bå 
submitteä  iî  writinç tï thå author®   Thå prograí ió  copyrighô 
198±  bù  thå  author®  Uså  ió  permitteä  iî  á  non-commerciaì 
environment®   Commerciaì  uså licenseó maù bå obtaineä froí  thå 
authoò  aô  á  reasonablå cost®   Conversionó  caî  bå  performeä Šbetweeî  otheò harä sectoò formató anä cp/í format®   Contacô  uó 
foò details.

CP/Í IÓ Á TRADEMARË OÆ DIGITAÌ RESEARCH¬  PACIFIÃ GROVÅ CA® MITS¬ 
ALTAIR¬  PCÃ  MAÙ  BÅ REGISTEREÄ TRADEMARKÓ  OÆ  PERTEÃ  COMPUTEÒ 
CORP.¬ CHATSWORTÈ CA.
 



                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||

                                              Z3LIB Distribution


                                                  Written by
                                                 Richard Conn

                                        Copyright 1986   Richard Conn

                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
          Marketed and Distributed by:  ||||||||||||||||||||||||||||||
               Echelon, Inc             ||||||||||||||||||||||||||||||
               101 First Street         ||||||||||||||||||||||||||||||
               Los Altos, CA  94022     ||||||||||||||||||||||||||||||
               415/948-3820             ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
          Z-Node Central:               ||||||||||||||||||||||||||||||
               415/489-9005             ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||
                                        ||||||||||||||||||||||||||||||

















                     T A B L E   OF   C O N T E N T S

       1. Z3LIB......................................................1
          1.1. Environment Access 1..................................1
               1.1.1. Command Line...................................1
               1.1.2. CRT/Printer Data...............................1
               1.1.3. DU/Max DU......................................1
               1.1.4. External FCB...................................1
               1.1.5. Environment of ZCPR3...........................1
               1.1.6. FCP Address....................................1
               1.1.7. File Names.....................................1
               1.1.8. Initialize.....................................1
               1.1.9. IOP............................................2
               1.1.10. IOP Recording.................................2
          1.2. Environment Access 2..................................3
               1.2.1. Messages.......................................3
               1.2.2. Named Directories..............................3
               1.2.3. Path...........................................3
               1.2.4. Processor Speed................................3
               1.2.5. Quiet Flag.....................................3
               1.2.6. RCP Address....................................3
               1.2.7. Shell Stack....................................3
               1.2.8. Wheel Byte.....................................3
          1.3. Flow and ZEX Control..................................4
               1.3.1. Flow Control...................................4
               1.3.2. ZEX Access and Control, ZEX Data...............4
               1.3.3. ZEX Access and Control, ZEX Status and Control.4
          1.4. Messages of ZCPR3.....................................5
               1.4.1. Command Status Messages........................5
               1.4.2. Error Flag and Error Command...................5
               1.4.3. Inter-Transient Error Code.....................5
               1.4.4. Register Access................................5
          1.5. Utilities.............................................6
               1.5.1. Locate ROOT Directory in Path..................6
               1.5.2. Log into ZCPR3 FCB DU..........................6
               1.5.3. Named Directory and Disk User Conversion.......6
               1.5.4. Output Routines Based on the Quiet Flag........6
               1.5.5. Parse Command Line.............................6
               1.5.6. Parse Token....................................6
               1.5.7. Pause Execution................................6
               1.5.8. Program Loader (Chain).........................6
               1.5.9. Resolve Directory References...................6
               1.5.10. Search for File Along Path....................6
               1.5.11. Shell Stack Manipulation......................7
               1.5.12. Z3LIB Version Number..........................7
               1.5.13. Initialize Z3LIB..............................7
          1.6. Other Files...........................................8










                                    i





     


     1. Z3LIB

     1.1. Environment Access 1

     1.1.1. Command Line
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     APPCL                   Z3APPCL .Z80      2     16  947F     63
     CLRCL                   Z3CLRCL .Z80      1      6  2334     6E
     GETCL1                  Z3GCL1  .Z80      1      8  72E5     4F
     GETCL2                  Z3GCL2  .Z80      2      9  076D     01
     PUTCL                   Z3PCL   .Z80      3     19  2907     A8

     1.1.2. CRT/Printer Data
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     GETCRT                  Z3GCRT  .Z80      1      7  5320     65
     PUTCRT                  Z3PCRT  .Z80      1      6  DF3C     9C
     GETPRT                  Z3GPRT  .Z80      1      7  A52C     0C
     PUTPRT                  Z3PPRT  .Z80      1      6  EE19     CC

     1.1.3. DU/Max DU
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     GETDUOK                 Z3GDUOK .Z80      1      4  79B2     20
     PUTDUOK                 Z3PDUOK .Z80      1      4  F4A3     59
     GETMDISK                Z3GMDISK.Z80      1      4  AFF2     1F
     PUTMDISK                Z3PMDISK.Z80      1      4  21E4     5A
     GETMUSER                Z3GMUSER.Z80      1      4  1471     AB
     PUTMUSER                Z3PMUSER.Z80      1      4  3E50     E6

     1.1.4. External FCB
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     GETEFCB                 Z3GEFCB .Z80      1      4  DD77     4E

     1.1.5. Environment of ZCPR3
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     GETENV                  Z3GENV  .Z80      1      3  9F4F     0E
     GETVID                  Z3GVID  .Z80      1      5  95A4     A5

     1.1.6. FCP Address
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     GETFCP                  Z3GFCP  .Z80      1      6  4400     AA

     1.1.7. File Names
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     GETFN1                  Z3GFN1  .Z80      1      4  F73A     24
     GETFN2                  Z3GFN2  .Z80      1      4  6BFE     5E
     GETFNX                  Z3GFNX  .Z80      1      6  9468     45
     PUTFNX                  Z3PFNX  .Z80      2      9  EF8E     5C

     1.1.8. Initialize
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     Z3INIT                  Z3INI   .Z80      1      4  394E     25






                                     1





     


     1.1.9. IOP
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     GETION                  Z3GIOX  .Z80      3     18  129F     BF
     GETIOP                  Z3GIOP  .Z80      1      6  6DEB     81
     GETIOS                  Z3GIOX  .Z80      3     18  129F     BF
     IOMATCH                 Z3IOMA  .Z80      2     16  5CB7     86
     PUTIOD                  Z3GIOX  .Z80      3     18  129F     BF

     1.1.10. IOP Recording
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     IORCOFF, IORCON,
     IORLOFF, IORLON         Z3IOR   .Z80      2     14  A7D9     4F













































                                     2





     


     1.2. Environment Access 2

     1.2.1. Messages
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     GETMSG                  Z3GMSG  .Z80      1      5  9FD4     D1
     GETSHM                  Z3MSGG  .Z80      1      6  49A7     E0
     PUTSHM                  Z3MSGH  .Z80      1      6  3683     CB

     1.2.2. Named Directories
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     ADDNDR                  Z3ANDR  .Z80      5     35  E059     CB
     DIRNDR                  Z3QNDR  .Z80      3     18  5CBA     A4
     DUNDR                   Z3QNDR  .Z80      3     18  5CBA     A4
     GETNDR                  Z3GNDR  .Z80      1      6  6B47     25
     SUBNDR                  Z3SNDR  .Z80      3     20  D5E5     EC

     1.2.3. Path
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     GETPATH                 Z3GPATH .Z80      1      6  581E     E8

     1.2.4. Processor Speed
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     GETSPEED                Z3GSPEED.Z80      1      4  9815     23
     PUTSPEED                Z3PSPEED.Z80      1      4  03AD     5E

     1.2.5. Quiet Flag
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     GETQUIET                Z3GQUIET.Z80      1      4  1379     BC
     PUTQUIET                Z3PQUIET.Z80      1      4  6AFA     FD

     1.2.6. RCP Address
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     GETRCP                  Z3GRCP  .Z80      1      6  8DC7     F1

     1.2.7. Shell Stack
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     GETSH1, GETSH2          Z3GSH   .Z80      2     10  E963     E5

     1.2.8. Wheel Byte
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     GETWHL                  Z3GWHL  .Z80      1      5  B859     30
     PUTWHL                  Z3PWHL  .Z80      1      5  3153     BB















                                     3





     


     1.3. Flow and ZEX Control

     1.3.1. Flow Control
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     IFEND                   Z3IFEND .Z80      1      5  B672     9E
     IFT, IFF                Z3IF    .Z80      2     14  F002     D6
     IFTEST                  Z3IFTEST.Z80      1      6  29EB     11
     IFELSE                  Z3IFELSE.Z80      1      8  E68D     07

     1.3.2. ZEX Access and Control, ZEX Data
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     GETZFC                  Z3GZFC  .Z80      1      8  416C     8A
     GETZNC                  Z3GZNC  .Z80      1      8  FD4E     84
     PUTZNC                  Z3PZNC  .Z80      1      8  2507     B2
     GETZRUN                 Z3GZR   .Z80      1      7  8D60     D2
     PUTZRUN                 Z3PZR   .Z80      1      7  D350     D5

     1.3.3. ZEX Access and Control, ZEX Status and Control
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     GETZEX                  Z3MSG8  .Z80      1      5  9E2E     16
     PUTZEX                  Z3MSG9  .Z80      1      7  859E     DC
     HALTZEX                 Z3HZEX  .Z80      1      6  55A5     AC
     STOPZEX, STRTZEX        Z3MSG9  .Z80      1      7  859E     DC


































                                     4





     


     1.4. Messages of ZCPR3

     1.4.1. Command Status Messages
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     GETCST                  Z3MSG5  .Z80      1      4  98A9     8B
     PUTCST                  Z3MSGF  .Z80      1      6  56AA     7F
     QERROR                  Z3MSG7  .Z80      1      6  80B2     BB
     QSHELL                  Z3MSG6  .Z80      1      5  9367     F5

     1.4.2. Error Flag and Error Command
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     ERRADR                  Z3MSGE  .Z80      1      5  A39F     45
     GETER1                  Z3MSG1  .Z80      1      4  C222     B8
     PUTER1                  Z3MSG2  .Z80      1      4  34E7     69
     GETERC                  Z3MSGB  .Z80      1      8  3DB8     96
     PUTERC                  Z3MSG3  .Z80      1      4  6E53     7C

     1.4.3. Inter-Transient Error Code
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     GETER2                  Z3MSG3  .Z80      1      4  6E53     7C
     PUTER2                  Z3MSG4  .Z80      1      4  7F44     F0

     1.4.4. Register Access
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     GETREG                  Z3MSGC  .Z80      1      6  F633     65
     PUTREG                  Z3MSGD  .Z80      1      6  DF1D     4C































                                     5





     


     1.5. Utilities

     1.5.1. Locate ROOT Directory in Path
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     ROOT                    Z3ROOT  .Z80      1      8  7FA8     F7

     1.5.2. Log into ZCPR3 FCB DU
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     Z3LOG                   Z3LOG   .Z80      2      9  C73C     10

     1.5.3. Named Directory and Disk User Conversion
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     DIRTDU                  Z3DIRTDU.Z80      3     20  F888     B8
     DUTDIR                  Z3DUTDIR.Z80      2      9  FD65     7D

     1.5.4. Output Routines Based on the Quiet Flag
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     QCOUT                   Z3QCOUT .Z80      1      4  DBC1     CD
     QCRLF                   Z3QCRLF .Z80      1      4  C3F0     D8
     QOUT                    Z3QOUT  .Z80      1      4  10E5     A4
     QPRINT                  Z3QPRINT.Z80      1      6  B49C     3D
     QPSTR                   Z3QPSTR .Z80      1      4  D17C     7D

     1.5.5. Parse Command Line
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     PARSER                  Z3PRS1  .Z80     14    112  BB1B     5E

     1.5.6. Parse Token
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     ZPRSFN                  Z3PRS1  .Z80     14    112  BB1B     5E
     ZFNAME                  Z3PRS2  .Z80     11     82  409C     6D

     1.5.7. Pause Execution
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     WAIT1S                  Z3W1    .Z80      1      7  F214     3F
     WAIT1MS                 Z3W2    .Z80      1      6  A446     E2
     WAITP1S                 Z3W3    .Z80      1      7  2F1F     E3

     1.5.8. Program Loader (Chain)
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     PRGLOAD                 Z3PRGLD .Z80      3     20  C76F     0F

     1.5.9. Resolve Directory References
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     DNSCAN, DUSCAN,
     DIRSCAN                 Z3PRS3  .Z80      7     51  ADE9     16

     1.5.10. Search for File Along Path
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     PFIND                   Z3PFIND .Z80      5     33  C05A     A4







                                     6





     


     1.5.11. Shell Stack Manipulation
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     SHEMPTY                 Z3SHEMPT.Z80      1      4  2AFB     54
     SHFULL                  Z3SHFULL.Z80      1      8  9572     3A
     SHPOP                   Z3SHPOP .Z80      2     13  4438     87
     SHPUSH                  Z3SHPUSH.Z80      3     22  07CC     DA

     1.5.12. Z3LIB Version Number
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     Z3LVER                  Z3LVER  .Z80      1      4  78AB     2E

     1.5.13. Initialize Z3LIB
     Contents                Filename.typ  Size K  Recs   CRC  Cksum
     Z3INIT                  Z3INI   .Z80      1      4  394E     25











































                                     7





     


     1.6. Other Files

     Z3LIB.REL is the relocatable object code library of Z3LIB

             Filename.typ  Size K  Recs   CRC  Cksum
             Z3LIB   .REL     10     78  B674     D7


     Z3LIB.ZEX is used to assemble and create Z3LIB.REL
     Z3LIB.SEQ shows the linking order of the modules in Z3LIB

             Filename.typ  Size K  Recs   CRC  Cksum
             Z3LIB   .ZEX      2     16  174D     E2
             Z3LIB   .SEQ      2     11  767D     CE


     Z3LIB.CN is this document file

             Filename.typ  Size K  Recs   CRC  Cksum
             Z3LIB   .CN      14    109  D3A7     4B


     The following are the Help Files for Z3LIB

             Filename.typ  Size K  Recs   CRC  Cksum
             Z3LIB   .HLP      3     17  0394     15
             Z3LIB1  .HLP     19    145  4526     A8
             Z3LIB2  .HLP     25    198  537A     61
             Z3LIB3  .HLP     14    109  1097     67
             Z3LIB4  .HLP     15    120  28F7     85
             Z3LIB5  .HLP     16    127  189C     13


























                                     8





     



     A
     ADDNDR, 3
     APPCL, 1

     C
     CLRCL, 1

     D
     DIRNDR, 3
     DIRSCAN, 6
     DIRTDU, 6
     DNSCAN, 6
     DUNDR, 3
     DUSCAN, 6
     DUTDIR, 6

     E
     ERRADR, 5

     G
     GETCL1, 1
     GETCL2, 1
     GETCRT, 1
     GETCST, 5
     GETDUOK, 1
     GETEFCB, 1
     GETENV, 1
     GETER1, 5
     GETER2, 5
     GETERC, 5
     GETFCP, 1
     GETFN1, 1
     GETFN2, 1
     GETFNX, 1
     GETION, 2
     GETIOP, 2
     GETIOS, 2
     GETMDISK, 1
     GETMSG, 3
     GETMUSER, 1
     GETNDR, 3
     GETPATH, 3
     GETPRT, 1
     GETQUIET, 3
     GETRCP, 3
     GETREG, 5
     GETSH1, 3
     GETSH2, 3
     GETSHM, 3
     GETSPEED, 3
     GETVID, 1
     GETWHL, 3
     GETZEX, 4
     GETZFC, 4


                                     9





     


     GETZNC, 4
     GETZRUN, 4

     H
     HALTZEX, 4

     I
     IFELSE, 4
     IFEND, 4
     IFF, 4
     IFT, 4
     IFTEST, 4
     IOMATCH, 2
     IORCOFF, 2
     IORCON, 2
     IORLOFF, 2
     IORLON, 2

     P
     PARSER, 6
     PFIND, 6
     PRGLOAD, 6
     PUTCL, 1
     PUTCRT, 1
     PUTCST, 5
     PUTDUOK, 1
     PUTER1, 5
     PUTER2, 5
     PUTERC, 5
     PUTFNX, 1
     PUTIOD, 2
     PUTMDISK, 1
     PUTMUSER, 1
     PUTPRT, 1
     PUTQUIET, 3
     PUTREG, 5
     PUTSHM, 3
     PUTSPEED, 3
     PUTWHL, 3
     PUTZEX, 4
     PUTZNC, 4
     PUTZRUN, 4

     Q
     QCOUT, 6
     QCRLF, 6
     QERROR, 5
     QOUT, 6
     QPRINT, 6
     QPSTR, 6
     QSHELL, 5






                                    10





     


     R
     ROOT, 6

     S
     SHEMPTY, 7
     SHFULL, 7
     SHPOP, 7
     SHPUSH, 7
     STOPZEX, 4
     STRTZEX, 4
     SUBNDR, 3

     W
     WAIT1MS, 6
     WAIT1S, 6
     WAITP1S, 6

     Z
     Z3INIT, 1, 7
     Z3LIB, 1
     Z3LOG, 6
     Z3LVER, 7
     ZFNAME, 6
     ZPRSFN, 6

































                                    11





     